(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{4511:function(e,t,n){"use strict";n.d(t,{xC:function(){return tU},wT:function(){return tL}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var r,i,o,s,a,c,u,l,p,f,h,d,v,y,g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function b(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function _(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function T(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function O(e,t){var n=e.locationOffset.column-1,r=N(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,c=t.column+a,u="".concat(e.name,":").concat(s,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),p=l[i];if(p.length>120){for(var f=Math.floor(c/80),h=[],d=0;d<p.length;d+=80)h.push(p.slice(d,d+80));return u+I([["".concat(s),h[0]]].concat(h.slice(1,f+1).map(function(e){return["",e]}),[[" ",N(c%80-1)+"^"],["",h[f+1]]]))}return u+I([["".concat(s-1),l[i-1]],["".concat(s),p],["",N(c-1)+"^"],["".concat(s+1),l[i+1]]])}function I(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t=e[0],r=e[1];return N(n-t.length)+t+(r?" | "+r:" |")}).join("\n")}function N(e){return Array(e+1).join(" ")}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return t&&("object"===w(t)||"function"==typeof t)?t:x(e)}function x(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){var t="function"==typeof Map?new Map:void 0;return(R=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return P(e,arguments,L(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),M(n,e)})(e)}function P(e,t,n){return(P=D()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&M(i,n.prototype),i}).apply(null,arguments)}function D(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(o,e);var t,n,r,i=(t=D(),function(){var e,n=L(o);if(t){var r=L(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return k(this,e)});function o(e,t,n,r,s,a,c){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),(y=i.call(this,e)).name="GraphQLError",y.originalError=null!=a?a:void 0,y.nodes=j(Array.isArray(t)?t:t?[t]:void 0);for(var u,l=[],p=0,f=null!==(g=y.nodes)&&void 0!==g?g:[];p<f.length;p++){var h,d,v,y,g,b=f[p].loc;null!=b&&l.push(b)}l=j(l),y.source=null!=n?n:null===(h=l)||void 0===h?void 0:h[0].source,y.positions=null!=r?r:null===(d=l)||void 0===d?void 0:d.map(function(e){return e.start}),y.locations=r&&n?r.map(function(e){return T(n,e)}):null===(v=l)||void 0===v?void 0:v.map(function(e){return T(e.source,e.start)}),y.path=null!=s?s:void 0;var _=null==a?void 0:a.extensions;return null==c&&"object"==E(u=_)&&null!==u?y.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){var r,i;r=e,i=n[t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},_):y.extensions=null!=c?c:{},(Object.defineProperties(x(y),{message:{enumerable:!0},locations:{enumerable:null!=y.locations},path:{enumerable:null!=y.path},extensions:{enumerable:null!=y.extensions&&Object.keys(y.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack)?(Object.defineProperty(x(y),"stack",{value:a.stack,writable:!0,configurable:!0}),k(y)):(Error.captureStackTrace?Error.captureStackTrace(x(y),o):Object.defineProperty(x(y),"stack",{value:Error().stack,writable:!0,configurable:!0}),y)}return n=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i,o=r[n];o.loc&&(t+="\n\n"+O((i=o.loc).source,T(i.source,i.start)))}else if(e.source&&e.locations)for(var s=0,a=e.locations;s<a.length;s++){var c=a[s];t+="\n\n"+O(e.source,c)}return t}(this)}},{key:S,get:function(){return"Object"}}],A(o.prototype,n),r&&A(o,r),o}(R(Error));function j(e){return void 0===e||0===e.length?void 0:e}function B(e,t,n){return new U("Syntax Error: ".concat(n),void 0,e,[t])}var F=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),q="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function V(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(0))throw Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,q&&(e.prototype[q]=t)}var K=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();V(K);var G=function(){function e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function z(e){return null!=e&&"string"==typeof e.kind}V(G);var J=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){switch(H(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":if(null===e)return"null";return function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n,r,i=[].concat(t,[e]),o="function"==typeof(n=e[String(q)])?n:"function"==typeof e.inspect?e.inspect:void 0;if(void 0!==o){var s=o.call(e);if(s!==e)return"string"==typeof s?s:Q(s,i)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(Q(e[o],t));return 1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}(e,i);return 0===(r=Object.keys(e)).length?"{}":i.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]":"{ "+r.map(function(t){var n=Q(e[t],i);return t+": "+n}).join(", ")+" }"}(e,t);default:return String(e)}}function Y(e,t){if(!Boolean(e))throw Error(t)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X=function(){var e;function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||Y(0,"Body must be a string. Received: ".concat(Q(e,[]),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Y(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Y(0,"column in locationOffset is 1-indexed and must be positive.")}return W(t.prototype,[{key:S,get:function(){return"Source"}}]),e&&W(t,e),t}(),$=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Z(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"	"!==e[t])return!1;return!0}var ee=function(){function e(e){var t=new G(J.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e,t=this.token;if(t.kind!==J.EOF)do t=null!==(e=t.next)&&void 0!==e?e:t.next=function(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var s=r.charCodeAt(o),a=e.line,c=1+o-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new G(J.BANG,o,o+1,a,c,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do o=s.charCodeAt(++a);while(!isNaN(o)&&(o>31||9===o));return new G(J.COMMENT,t,a,n,r,i,s.slice(t+1,a))}(n,o,a,c,t);case 36:return new G(J.DOLLAR,o,o+1,a,c,t);case 38:return new G(J.AMP,o,o+1,a,c,t);case 40:return new G(J.PAREN_L,o,o+1,a,c,t);case 41:return new G(J.PAREN_R,o,o+1,a,c,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new G(J.SPREAD,o,o+3,a,c,t);break;case 58:return new G(J.COLON,o,o+1,a,c,t);case 61:return new G(J.EQUALS,o,o+1,a,c,t);case 64:return new G(J.AT,o,o+1,a,c,t);case 91:return new G(J.BRACKET_L,o,o+1,a,c,t);case 93:return new G(J.BRACKET_R,o,o+1,a,c,t);case 123:return new G(J.BRACE_L,o,o+1,a,c,t);case 124:return new G(J.PIPE,o,o+1,a,c,t);case 125:return new G(J.BRACE_R,o,o+1,a,c,t);case 34:if(34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2))return function(e,t,n,r,i,o){for(var s=e.body,a=t+3,c=a,u=0,l="";a<s.length&&!isNaN(u=s.charCodeAt(a));){if(34===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2))return l+=s.slice(c,a),new G(J.BLOCK_STRING,t,a+3,n,r,i,function(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&Z(t[i]);)++i;for(var o=t.length;o>i&&Z(t[o-1]);)--o;return t.slice(i,o).join("\n")}(l));if(u<32&&9!==u&&10!==u&&13!==u)throw B(e,a,"Invalid character within String: ".concat(et(u),"."));10===u?(++a,++o.line,o.lineStart=a):13===u?(10===s.charCodeAt(a+1)?a+=2:++a,++o.line,o.lineStart=a):92===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2)&&34===s.charCodeAt(a+3)?(l+=s.slice(c,a)+'"""',a+=4,c=a):++a}throw B(e,a,"Unterminated string.")}(n,o,a,c,t,e);return function(e,t,n,r,i){for(var o=e.body,s=t+1,a=s,c=0,u="";s<o.length&&!isNaN(c=o.charCodeAt(s))&&10!==c&&13!==c;){if(34===c)return u+=o.slice(a,s),new G(J.STRING,t,s+1,n,r,i,u);if(c<32&&9!==c)throw B(e,s,"Invalid character within String: ".concat(et(c),"."));if(++s,92===c){switch(u+=o.slice(a,s-1),c=o.charCodeAt(s)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="	";break;case 117:var l,p,f,h,d=(l=o.charCodeAt(s+1),p=o.charCodeAt(s+2),f=o.charCodeAt(s+3),h=o.charCodeAt(s+4),er(l)<<12|er(p)<<8|er(f)<<4|er(h));if(d<0){var v=o.slice(s+1,s+5);throw B(e,s,"Invalid character escape sequence: \\u".concat(v,"."))}u+=String.fromCharCode(d),s+=4;break;default:throw B(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}a=++s}}throw B(e,s,"Unterminated string.")}(n,o,a,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s,a=e.body,c=n,u=t,l=!1;if(45===c&&(c=a.charCodeAt(++u)),48===c){if((c=a.charCodeAt(++u))>=48&&c<=57)throw B(e,u,"Invalid number, unexpected digit after 0: ".concat(et(c),"."))}else u=en(e,u,c),c=a.charCodeAt(u);if(46===c&&(l=!0,c=a.charCodeAt(++u),u=en(e,u,c),c=a.charCodeAt(u)),(69===c||101===c)&&(l=!0,(43===(c=a.charCodeAt(++u))||45===c)&&(c=a.charCodeAt(++u)),u=en(e,u,c),c=a.charCodeAt(u)),46===c||95===(s=c)||s>=65&&s<=90||s>=97&&s<=122)throw B(e,u,"Invalid number, expected digit but got: ".concat(et(c),"."));return new G(l?J.FLOAT:J.INT,t,u,r,i,o,a.slice(t,u))}(n,o,s,a,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,c=0;a!==s&&!isNaN(c=o.charCodeAt(a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new G(J.NAME,t,a,n,r,i,o.slice(t,a))}(n,o,a,c,t)}throw B(n,o,s<32&&9!==s&&10!==s&&13!==s?"Cannot contain the invalid character ".concat(et(s),"."):39===s?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(et(s),"."))}var u=e.line,l=1+o-e.lineStart;return new G(J.EOF,i,i,u,l,t)}(this,t);while(t.kind===J.COMMENT);return t},e}();function et(e){return isNaN(e)?J.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function en(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do o=r.charCodeAt(++i);while(o>=48&&o<=57);return i}throw B(e,i,"Invalid number, expected digit but got: ".concat(et(o),"."))}function er(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function ei(e,t){return new eo(e,t).parseDocument()}var eo=function(){function e(e,t){var n=e instanceof X?e:new X(e);this._lexer=new ee(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(J.NAME);return{kind:F.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:F.DOCUMENT,definitions:this.many(J.SOF,this.parseDefinition,J.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(J.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else if(this.peek(J.BRACE_L))return this.parseOperationDefinition();else if(this.peekDescription())return this.parseTypeSystemDefinition();throw this.unexpected()},t.parseOperationDefinition=function(){var e,t=this._lexer.token;if(this.peek(J.BRACE_L))return{kind:F.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var n=this.parseOperationType();return this.peek(J.NAME)&&(e=this.parseName()),{kind:F.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseOperationType=function(){var e=this.expectToken(J.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(J.PAREN_L,this.parseVariableDefinition,J.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:F.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(J.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(J.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(J.DOLLAR),{kind:F.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:F.SELECTION_SET,selections:this.many(J.BRACE_L,this.parseSelection,J.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(J.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(J.COLON)?(e=r,t=this.parseName()):t=r,{kind:F.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(J.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(J.PAREN_L,t,J.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(J.COLON),{kind:F.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:F.ARGUMENT,name:this.parseName(),value:(this.expectToken(J.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(J.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(J.NAME)?{kind:F.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:F.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return(this.expectKeyword("fragment"),(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)===!0)?{kind:F.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:F.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case J.BRACKET_L:return this.parseList(e);case J.BRACE_L:return this.parseObject(e);case J.INT:return this._lexer.advance(),{kind:F.INT,value:t.value,loc:this.loc(t)};case J.FLOAT:return this._lexer.advance(),{kind:F.FLOAT,value:t.value,loc:this.loc(t)};case J.STRING:case J.BLOCK_STRING:return this.parseStringLiteral();case J.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:F.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:F.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:F.NULL,loc:this.loc(t)};default:return{kind:F.ENUM,value:t.value,loc:this.loc(t)}}case J.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:F.STRING,value:e.value,block:e.kind===J.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:F.LIST,values:this.any(J.BRACKET_L,function(){return t.parseValueLiteral(e)},J.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:F.OBJECT,fields:this.any(J.BRACE_L,function(){return t.parseObjectField(e)},J.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(J.COLON),{kind:F.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(J.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(J.AT),{kind:F.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return(this.expectOptionalToken(J.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(J.BRACKET_R),e={kind:F.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(J.BANG))?{kind:F.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:F.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===J.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(J.STRING)||this.peek(J.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(J.BRACE_L,this.parseOperationTypeDefinition,J.BRACE_R);return{kind:F.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(J.COLON);var n=this.parseNamedType();return{kind:F.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:F.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:F.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if((null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(J.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(J.AMP)||this.peek(J.NAME));return t}return this.delimitedMany(J.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)===!0&&this.peek(J.BRACE_L)&&this._lexer.lookahead().kind===J.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(J.BRACE_L,this.parseFieldDefinition,J.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(J.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:F.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(J.PAREN_L,this.parseInputValueDef,J.PAREN_R)},t.parseInputValueDef=function(){var e,t=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(J.COLON);var i=this.parseTypeReference();this.expectOptionalToken(J.EQUALS)&&(e=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:F.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:e,directives:o,loc:this.loc(t)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:F.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:F.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(J.EQUALS)?this.delimitedMany(J.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:F.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(J.BRACE_L,this.parseEnumValueDefinition,J.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:F.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:F.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(J.BRACE_L,this.parseInputValueDef,J.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===J.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(J.BRACE_L,this.parseOperationTypeDefinition,J.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:F.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:F.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:F.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:F.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:F.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:F.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:F.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(J.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:F.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(J.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==$[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if((null===(t=this._options)||void 0===t?void 0:t.noLocation)!==!0)return new K(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw B(this._lexer.source,t.start,"Expected ".concat(ea(e),", found ").concat(es(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind===J.NAME&&t.value===e)this._lexer.advance();else throw B(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(es(t),"."))},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===J.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return B(this._lexer.source,t.start,"Unexpected ".concat(es(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n},e}();function es(e){var t=e.value;return ea(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function ea(e){return e===J.BANG||e===J.DOLLAR||e===J.AMP||e===J.PAREN_L||e===J.PAREN_R||e===J.SPREAD||e===J.COLON||e===J.EQUALS||e===J.AT||e===J.BRACKET_L||e===J.BRACKET_R||e===J.BRACE_L||e===J.PIPE||e===J.BRACE_R?'"'.concat(e,'"'):e}var ec={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},eu=Object.freeze({});function el(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ec,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,p=[],f=[],h=e;do{var d,v=++s===o.length,y=v&&0!==a.length;if(v){if(u=0===f.length?void 0:p[p.length-1],c=l,l=f.pop(),y){if(i)c=c.slice();else{for(var g={},b=0,_=Object.keys(c);b<_.length;b++){var m=_[b];g[m]=c[m]}c=g}for(var E=0,S=0;S<a.length;S++){var T=a[S][0],O=a[S][1];i&&(T-=E),i&&null===O?(c.splice(T,1),E++):c[T]=O}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?s:o[s]:void 0,null==(c=l?l[u]:h))continue;l&&p.push(u)}var I=void 0;if(!Array.isArray(c)){if(!z(c))throw Error("Invalid AST Node: ".concat(Q(c,[]),"."));var N=function(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}(t,c.kind,v);if(N){if((I=N.call(t,c,u,l,p,f))===eu)break;if(!1===I){if(!v){p.pop();continue}}else if(void 0!==I&&(a.push([u,I]),!v)){if(z(I))c=I;else{p.pop();continue}}}}void 0===I&&y&&a.push([u,c]),v?p.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(c))?c:null!==(d=n[c.kind])&&void 0!==d?d:[],s=-1,a=[],l&&f.push(l),l=c)}while(void 0!==r);return 0!==a.length&&(h=a[a.length-1][1]),h}(e,{leave:ep})}var ep={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return eh(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=ev("(",eh(e.variableDefinitions,", "),")"),i=eh(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?eh([t,eh([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+ev(" = ",r)+ev(" ",eh(i," "))},SelectionSet:function(e){return ed(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,s=ev("",t,": ")+n,a=s+ev("(",eh(r,", "),")");return a.length>80&&(a=s+ev("(\n",ey(eh(r,"\n")),"\n)")),eh([a,eh(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+ev(" ",eh(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return eh(["...",ev("on ",t),eh(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(ev("(",eh(r,", "),")")," ")+"on ".concat(n," ").concat(ev("",eh(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"	"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!r||o||s||n,c="";return a&&!(r&&i)&&(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+eh(e.values,", ")+"]"},ObjectValue:function(e){return"{"+eh(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+ev("(",eh(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:ef(function(e){var t=e.directives,n=e.operationTypes;return eh(["schema",eh(t," "),ed(n)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:ef(function(e){return eh(["scalar",e.name,eh(e.directives," ")]," ")}),ObjectTypeDefinition:ef(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return eh(["type",t,ev("implements ",eh(n," & ")),eh(r," "),ed(i)]," ")}),FieldDefinition:ef(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(eb(n)?ev("(\n",ey(eh(n,"\n")),"\n)"):ev("(",eh(n,", "),")"))+": "+r+ev(" ",eh(i," "))}),InputValueDefinition:ef(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return eh([t+": "+n,ev("= ",r),eh(i," ")]," ")}),InterfaceTypeDefinition:ef(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return eh(["interface",t,ev("implements ",eh(n," & ")),eh(r," "),ed(i)]," ")}),UnionTypeDefinition:ef(function(e){var t=e.name,n=e.directives,r=e.types;return eh(["union",t,eh(n," "),r&&0!==r.length?"= "+eh(r," | "):""]," ")}),EnumTypeDefinition:ef(function(e){var t=e.name,n=e.directives,r=e.values;return eh(["enum",t,eh(n," "),ed(r)]," ")}),EnumValueDefinition:ef(function(e){return eh([e.name,eh(e.directives," ")]," ")}),InputObjectTypeDefinition:ef(function(e){var t=e.name,n=e.directives,r=e.fields;return eh(["input",t,eh(n," "),ed(r)]," ")}),DirectiveDefinition:ef(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(eb(n)?ev("(\n",ey(eh(n,"\n")),"\n)"):ev("(",eh(n,", "),")"))+(r?" repeatable":"")+" on "+eh(i," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return eh(["extend schema",eh(t," "),ed(n)]," ")},ScalarTypeExtension:function(e){return eh(["extend scalar",e.name,eh(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return eh(["extend type",t,ev("implements ",eh(n," & ")),eh(r," "),ed(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return eh(["extend interface",t,ev("implements ",eh(n," & ")),eh(r," "),ed(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return eh(["extend union",t,eh(n," "),r&&0!==r.length?"= "+eh(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return eh(["extend enum",t,eh(n," "),ed(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return eh(["extend input",t,eh(n," "),ed(r)]," ")}};function ef(e){return function(t){return eh([t.description,e(t)],"\n")}}function eh(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e}).join(n))&&void 0!==t?t:""}function ed(e){return ev("{\n",ey(eh(e,"\n")),"\n}")}function ev(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function ey(e){return ev("  ",e.replace(/\n/g,"\n  "))}function eg(e){return -1!==e.indexOf("\n")}function eb(e){return null!=e&&e.some(eg)}var e_=n(3769),em=n(9654),eE=n(2752),eS="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,eT=eS?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",eO=eS?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",eI=n(5387),eN=function(e,t){return(eN=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ew(e,t){function n(){this.constructor=e}eN(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var eC=function(){return(eC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function eA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ek(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function ex(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function eR(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var eP=n(9329),eD=n.n(eP),eM=eD(),eL=n(9222),eU=n(8295),ej=n(5877),eB=new e_.k("AbstractPubSubProvider"),eF=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=eC(eC({},e),this._config),eB.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return eC({},this._config)},enumerable:!0,configurable:!0}),e}();(r=l||(l={})).CONNECTION_CLOSED="Connection closed",r.CONNECTION_FAILED="Connection failed",r.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",r.SUBSCRIPTION_ACK="Subscription ack",r.TIMEOUT_DISCONNECT="Timeout disconnect",(i=p||(p={})).Connected="Connected",i.ConnectedPendingNetwork="ConnectedPendingNetwork",i.ConnectionDisrupted="ConnectionDisrupted",i.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",i.Connecting="Connecting",i.ConnectedPendingDisconnect="ConnectedPendingDisconnect",i.Disconnected="Disconnected",i.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive";var eq=n(490),eV=n(8008),eK=eD(),eG=function(){function e(){}return e.prototype.networkMonitor=function(t){if((0,eL.lC)().isNode)return eK.from([{online:!0}]);var n=(0,eL.n2)()?self:window;return new eK(function(t){t.next({online:n.navigator.onLine});var r=function(){return t.next({online:!0})},i=function(){return t.next({online:!1})};return n.addEventListener("online",r),n.addEventListener("offline",i),e._observers.push(t),function(){n.removeEventListener("online",r),n.removeEventListener("offline",i),e._observers=e._observers.filter(function(e){return e!==t})}})},e._observerOverride=function(t){var n,r,i=function(n){if(n.closed)return e._observers=e._observers.filter(function(e){return e!==n}),"continue";n.next(t)};try{for(var o=(0,eV.XA)(e._observers),s=o.next();!s.done;s=o.next()){var a=s.value;i(a)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e._observers=[],e}(),ez=function(){return new eG().networkMonitor()},eJ={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}},eH=function(){function e(){var e=this;this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=ez().subscribe(function(t){var n,r=t.online;e.record(r?eJ.ONLINE:eJ.OFFLINE),null===(n=e._initialNetworkStateSubscription)||void 0===n||n.unsubscribe()}),this._linkedConnectionStateObservable=new eM(function(t){t.next(e._linkedConnectionState),e._linkedConnectionStateObserver=t})}return e.prototype.enableNetworkMonitoring=function(){var e,t=this;null===(e=this._initialNetworkStateSubscription)||void 0===e||e.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=ez().subscribe(function(e){var n=e.online;t.record(n?eJ.ONLINE:eJ.OFFLINE)}))},e.prototype.disableNetworkMonitoring=function(){var e;null===(e=this._networkMonitoringSubscription)||void 0===e||e.unsubscribe(),this._networkMonitoringSubscription=void 0},Object.defineProperty(e.prototype,"connectionStateObservable",{get:function(){var e,t=this;return this._linkedConnectionStateObservable.map(function(e){return t.connectionStatesTranslator(e)}).filter(function(t){var n=t!==e;return e=t,n})},enumerable:!0,configurable:!0}),e.prototype.record=function(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();var t=eC(eC({},this._linkedConnectionState),e);this._linkedConnectionState=eC({},t),this._linkedConnectionStateObserver.next(this._linkedConnectionState)},e.prototype.connectionStatesTranslator=function(e){var t=e.connectionState,n=e.networkState,r=e.intendedConnectionState,i=e.keepAliveState;return"connected"===t&&"disconnected"===n?p.ConnectedPendingNetwork:"connected"===t&&"disconnected"===r?p.ConnectedPendingDisconnect:"disconnected"===t&&"connected"===r&&"disconnected"===n?p.ConnectionDisruptedPendingNetwork:"disconnected"===t&&"connected"===r?p.ConnectionDisrupted:"connected"===t&&"unhealthy"===i?p.ConnectedPendingKeepAlive:"connecting"===t?p.Connecting:"disconnected"===t?p.Disconnected:p.Connected},e}(),eQ=[400,401,403],eY="ConnectionStateChange";(o=f||(f={})).GQL_CONNECTION_INIT="connection_init",o.GQL_CONNECTION_ERROR="connection_error",o.GQL_CONNECTION_ACK="connection_ack",o.GQL_START="start",o.GQL_START_ACK="start_ack",o.GQL_DATA="data",o.GQL_CONNECTION_KEEP_ALIVE="ka",o.GQL_STOP="stop",o.GQL_COMPLETE="complete",o.GQL_ERROR="error",(s=h||(h={}))[s.PENDING=0]="PENDING",s[s.CONNECTED=1]="CONNECTED",s[s.FAILED=2]="FAILED",(a=d||(d={}))[a.CLOSED=0]="CLOSED",a[a.READY=1]="READY",a[a.CONNECTING=2]="CONNECTING";var eW="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",eX={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"};(c=v||(v={})).START_RECONNECT="START_RECONNECT",c.HALT_RECONNECT="HALT_RECONNECT";var e$=function(){function e(){this.reconnectObservers=[]}return e.prototype.addObserver=function(e){this.reconnectObservers.push(e)},e.prototype.record=function(e){var t=this;e===v.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(function(){t._triggerReconnect(),t.reconnectIntervalId=setInterval(function(){t._triggerReconnect()},6e4)},5e3)),e===v.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))},e.prototype.close=function(){this.reconnectObservers.forEach(function(e){var t;null===(t=e.complete)||void 0===t||t.call(e)})},e.prototype._triggerReconnect=function(){this.reconnectObservers.forEach(function(e){var t;null===(t=e.next)||void 0===t||t.call(e)})},e}(),eZ=new e_.k("MqttOverWSProvider"),e0=function(){function e(){this.promises=new Map}return e.prototype.get=function(e,t){return ek(this,void 0,void 0,function(){var n,r,i=this;return ex(this,function(o){return(n=this.promises.get(e))?[2,n]:t?(r=t(e),this.promises.set(e,r),r.catch(function(t){return i.promises.delete(e)}),[2,r]):[2,void 0]})})},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){this.promises.delete(e)},e}(),e1=function(e,t,n){eq.X.dispatch("pubsub",{event:e,data:t,message:n},"PubSub",eW)},e2="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",e3=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,eC(eC({},t),{clientId:t.clientId||(0,ej.v4)()}))||this;return n._clientsQueue=new e0,n.connectionStateMonitor=new eH,n.reconnectionMonitor=new e$,n._topicObservers=new Map,n._clientIdObservers=new Map,n.connectionStateMonitor.connectionStateObservable.subscribe(function(e){e1(eY,{provider:n,connectionState:e},"Connection state is "+e),n.connectionState=e,e===p.ConnectionDisrupted?n.reconnectionMonitor.record(v.START_RECONNECT):e!==p.Connecting&&n.reconnectionMonitor.record(v.HALT_RECONNECT)}),n}return ew(t,e),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[e2]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var t=e.clientId,n=e.errorCode,r=eA(e,["clientId","errorCode"]);if(0!==n){if(eZ.warn(t,JSON.stringify(eC({errorCode:n},r),null,2)),!t||!this._clientIdObservers.get(t))return;this.disconnect(t)}},t.prototype.newClient=function(e){var t=e.url,n=e.clientId;return ek(this,void 0,void 0,function(){var e,r=this;return ex(this,function(i){switch(i.label){case 0:return eZ.debug("Creating new MQTT client",n),this.connectionStateMonitor.record(eJ.OPENING_CONNECTION),(e=new eU.Client(t,n)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},e.onConnectionLost=function(e){var t=e.errorCode,i=eA(e,["errorCode"]);r.onDisconnect(eC({clientId:n,errorCode:t},i)),r.connectionStateMonitor.record(eJ.CLOSED)},[4,new Promise(function(t,i){e.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return t(!0)},onFailure:function(e){n&&r._clientsQueue.remove(n),r.connectionStateMonitor.record(eJ.CLOSED),t(!1)}})})];case 1:return i.sent()&&this.connectionStateMonitor.record(eJ.CONNECTION_ESTABLISHED),[2,e]}})})},t.prototype.connect=function(e,t){return void 0===t&&(t={}),ek(this,void 0,void 0,function(){var n=this;return ex(this,function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,function(e){return ek(n,void 0,void 0,function(){var n;return ex(this,function(r){switch(r.label){case 0:return[4,this.newClient(eC(eC({},t),{clientId:e}))];case 1:return(n=r.sent())&&this._topicObservers.forEach(function(e,t){n.subscribe(t)}),[2,n]}})})})];case 1:return[2,r.sent()]}})})},t.prototype.disconnect=function(e){return ek(this,void 0,void 0,function(){var t;return ex(this,function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(e)];case 1:return(t=n.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(e),this.connectionStateMonitor.record(eJ.CLOSED),[2]}})})},t.prototype.publish=function(e,t){return ek(this,void 0,void 0,function(){var n,r,i;return ex(this,function(o){switch(o.label){case 0:return n=[].concat(e),r=JSON.stringify(t),[4,this.clientsQueue.get(this.clientId)];case 1:return(i=o.sent())?(eZ.debug("Publishing to topic(s)",n.join(","),r),n.forEach(function(e){return i.send(e,r)})):eZ.debug("Publishing to topic(s) failed",n.join(","),r),[2]}})})},t.prototype._onMessage=function(e,t){try{var n=[];this._topicObservers.forEach(function(t,r){(function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return!1}return r===i.length})(r,e)&&n.push(t)});var r=JSON.parse(t);"object"==typeof r&&(r[e2]=e),n.forEach(function(e){e.forEach(function(e){return e.next(r)})})}catch(i){eZ.warn("Error handling message",i,t)}},t.prototype.subscribe=function(e,t){var n,r=this;void 0===t&&(t={});var i=[].concat(e);return eZ.debug("Subscribing to topic(s)",i.join(",")),new eM(function(e){i.forEach(function(t){var n=r._topicObservers.get(t);n||(n=new Set,r._topicObservers.set(t,n)),n.add(e)});var o=t.clientId,s=void 0===o?r.clientId:o,a=r._clientIdObservers.get(s);return a||(a=new Set),a.add(e),r._clientIdObservers.set(s,a),ek(r,void 0,void 0,function(){var e,r=this;return ex(this,function(o){switch(o.label){case 0:return[4,(e=function(){return ek(r,void 0,void 0,function(){var e,n,r,o,a;return ex(this,function(c){switch(c.label){case 0:if(c.trys.push([0,5,,6]),void 0!==(e=t.url))return[3,2];return[4,this.endpoint];case 1:return r=c.sent(),[3,3];case 2:r=e,c.label=3;case 3:return n=r,[4,this.connect(s,{url:n})];case 4:return void 0!==(o=c.sent())&&i.forEach(function(e){o.subscribe(e)}),[3,6];case 5:return a=c.sent(),eZ.debug("Error forming connection",a),[3,6];case 6:return[2]}})})})()];case 1:return o.sent(),n=new eM(function(e){r.reconnectionMonitor.addObserver(e)}).subscribe(function(){e()}),[2]}})}),function(){return ek(r,void 0,void 0,function(){var t,r,o,a=this;return ex(this,function(c){switch(c.label){case 0:return[4,this.clientsQueue.get(s)];case 1:return t=c.sent(),null==n||n.unsubscribe(),t&&(null===(r=this._clientIdObservers.get(s))||void 0===r||r.delete(e),(null===(o=this._clientIdObservers.get(s))||void 0===o?void 0:o.size)===0&&(this.disconnect(s),this.connectionStateMonitor.record(eJ.CLOSING_CONNECTION),this._clientIdObservers.delete(s)),i.forEach(function(n){var r=a._topicObservers.get(n)||new Set;r.delete(e),0===r.size&&(a._topicObservers.delete(n),t.isConnected()&&t.unsubscribe(n))})),[2,null]}})})}})},t}(eF),e4=new e_.k("AWSAppSyncProvider"),e6=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return ew(t,e),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,t,n){return ek(this,void 0,void 0,function(){return ex(this,function(e){throw Error("Operation not supported")})})},t.prototype._cleanUp=function(e){var t=this;Array.from(this._topicClient.entries()).filter(function(t){return eR(t,2)[1].clientId===e}).map(function(e){return eR(e,1)[0]}).forEach(function(e){return t._cleanUpForTopic(e)})},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=eA(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return eR(e,2)[1].clientId===n}).map(function(e){return eR(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(i)}),t._topicObservers.delete(e))}),this._cleanUp(n))},t.prototype.disconnect=function(t){return ek(this,void 0,void 0,function(){return ex(this,function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return n.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return n.sent(),this._cleanUp(t),[2]}})})},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=new eM(function(r){var i=[].concat(e);return e4.debug("Subscribing to topic(s)",i.join(",")),ek(n,void 0,void 0,function(){var e,n,o,s=this;return ex(this,function(a){switch(a.label){case 0:return i.forEach(function(e){s._topicObservers.has(e)||s._topicObservers.set(e,new Set),s._topicObservers.get(e).add(r)}),n=void 0===(e=t.mqttConnections)?[]:e,o=Object.entries(t.newSubscriptions).map(function(e){var t=eR(e,2),n=t[0];return[t[1].topic,n]}),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(eR(arguments[t]));return e}(Array.from(this._topicAlias.entries()),o)),[4,Promise.all(Object.entries(i.reduce(function(e,t){var r=n.find(function(e){return e.topics.indexOf(t)>-1});if(r){var i=r.client,o=r.url;e[i]||(e[i]={url:o,topics:new Set}),e[i].topics.add(t)}return e},{})).map(function(e){var t=eR(e,2),n=t[0],i=t[1],o=i.url,a=i.topics;return ek(s,void 0,void 0,function(){var e,t,i=this;return ex(this,function(s){switch(s.label){case 0:e=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.connect(n,{clientId:n,url:o})];case 2:return e=s.sent(),[3,4];case 3:return t=s.sent(),r.error({message:"Failed to connect",error:t}),r.complete(),[2,void 0];case 4:return a.forEach(function(t){e.isConnected()&&(e.subscribe(t),i._topicClient.set(t,e))}),[2,e]}})})}))];case 1:return a.sent(),[2]}})}),function(){e4.debug("Unsubscribing from topic(s)",i.join(",")),i.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return eM.from(r).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=eR(t,2),i=n[0],o=n[1];return e[r||i]=o,e},{}),e})},t}(e3);function e5(e){return(e5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e8="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function e7(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function e9(e,t){var n=e.locationOffset.column-1,r=tt(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,c=t.column+a,u="".concat(e.name,":").concat(s,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),p=l[i];if(p.length>120){for(var f=Math.floor(c/80),h=[],d=0;d<p.length;d+=80)h.push(p.slice(d,d+80));return u+te([["".concat(s),h[0]]].concat(h.slice(1,f+1).map(function(e){return["",e]}),[[" ",tt(c%80-1)+"^"],["",h[f+1]]]))}return u+te([["".concat(s-1),l[i-1]],["".concat(s),p],["",tt(c-1)+"^"],["".concat(s+1),l[i+1]]])}function te(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t=e[0],r=e[1];return tt(n-t.length)+t+(r?" | "+r:" |")}).join("\n")}function tt(e){return Array(e+1).join(" ")}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t){return t&&("object"===tn(t)||"function"==typeof t)?t:ts(e)}function ts(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ta(e){var t="function"==typeof Map?new Map:void 0;return(ta=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return tc(e,arguments,tp(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),tl(n,e)})(e)}function tc(e,t,n){return(tc=tu()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&tl(i,n.prototype),i}).apply(null,arguments)}function tu(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function tl(e,t){return(tl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tp(e){return(tp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tl(e,t)}(o,e);var t,n,r,i=(t=tu(),function(){var e,n=tp(o);if(t){var r=tp(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return to(this,e)});function o(e,t,n,r,s,a,c){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),(y=i.call(this,e)).name="GraphQLError",y.originalError=null!=a?a:void 0,y.nodes=th(Array.isArray(t)?t:t?[t]:void 0);for(var u,l=[],p=0,f=null!==(g=y.nodes)&&void 0!==g?g:[];p<f.length;p++){var h,d,v,y,g,b=f[p].loc;null!=b&&l.push(b)}l=th(l),y.source=null!=n?n:null===(h=l)||void 0===h?void 0:h[0].source,y.positions=null!=r?r:null===(d=l)||void 0===d?void 0:d.map(function(e){return e.start}),y.locations=r&&n?r.map(function(e){return e7(n,e)}):null===(v=l)||void 0===v?void 0:v.map(function(e){return e7(e.source,e.start)}),y.path=null!=s?s:void 0;var _=null==a?void 0:a.extensions;return null==c&&"object"==e5(u=_)&&null!==u?y.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach(function(t){var r,i;r=e,i=n[t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},_):y.extensions=null!=c?c:{},(Object.defineProperties(ts(y),{message:{enumerable:!0},locations:{enumerable:null!=y.locations},path:{enumerable:null!=y.path},extensions:{enumerable:null!=y.extensions&&Object.keys(y.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack)?(Object.defineProperty(ts(y),"stack",{value:a.stack,writable:!0,configurable:!0}),to(y)):(Error.captureStackTrace?Error.captureStackTrace(ts(y),o):Object.defineProperty(ts(y),"stack",{value:Error().stack,writable:!0,configurable:!0}),y)}return n=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i,o=r[n];o.loc&&(t+="\n\n"+e9((i=o.loc).source,e7(i.source,i.start)))}else if(e.source&&e.locations)for(var s=0,a=e.locations;s<a.length;s++){var c=a[s];t+="\n\n"+e9(e.source,c)}return t}(this)}},{key:e8,get:function(){return"Object"}}],ti(o.prototype,n),r&&ti(o,r),o}(ta(Error));function th(e){return void 0===e||0===e.length?void 0:e}var td=n(1987),tv=n(8764),ty=new e_.k("I18n"),tg=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),ty.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return void 0!==t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||((n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r)?r:void 0!==t?t:e)},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),Object.assign(n,t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map(function(n){t.putVocabulariesForLanguage(n,e[n])})},e}(),tb=new e_.k("I18n"),t_=null,tm=null,tE=function(){function e(){}return e.configure=function(t){return tb.debug("configure I18n"),t&&(t_=Object.assign({},t_,t.I18n||t),e.createInstance()),t_},e.getModuleName=function(){return"I18n"},e.createInstance=function(){tb.debug("create I18n instance"),tm||(tm=new tg(t_))},e.setLanguage=function(t){return e.checkConfig(),tm.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?tm.get(t,n):void 0===n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),tm.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),tm.putVocabularies(t)},e.checkConfig=function(){return tm||(tm=new tg(t_)),!0},e}();eI.d.register(tE);var tS={userAgent:eE.t.userAgent},tT=n(7262),tO=n(633),tI=n(7360),tN=n(2183),tw=new e_.k("AWSAppSyncRealTimeProvider"),tC=function(e,t,n){eq.X.dispatch("api",{event:e,data:t,message:n},"PubSub",eW)},tA=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com\/graphql$/i,tk=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.socketStatus=d.CLOSED,n.keepAliveTimeout=3e5,n.subscriptionObserverMap=new Map,n.promiseArray=[],n.connectionStateMonitor=new eH,n.reconnectionMonitor=new e$,n.connectionStateMonitorSubscription=n.connectionStateMonitor.connectionStateObservable.subscribe(function(e){tC(eY,{provider:n,connectionState:e},"Connection state is "+e),n.connectionState=e,e===p.ConnectionDisrupted&&n.reconnectionMonitor.record(v.START_RECONNECT),[p.Connected,p.ConnectedPendingDisconnect,p.ConnectedPendingKeepAlive,p.ConnectedPendingNetwork,p.ConnectedPendingNetwork,p.ConnectionDisruptedPendingNetwork,p.Disconnected].includes(e)&&n.reconnectionMonitor.record(v.HALT_RECONNECT)}),n}return ew(t,e),t.prototype.close=function(){this.socketStatus=d.CLOSED,this.connectionStateMonitor.record(eJ.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close()},t.prototype.getNewWebSocket=function(e,t){return new WebSocket(e,t)},t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw Error("Not used here")},t.prototype.publish=function(e,t,n){return ek(this,void 0,void 0,function(){return ex(this,function(e){throw Error("Operation not supported")})})},t.prototype.isCustomDomain=function(e){return null===e.match(tA)},t.prototype.subscribe=function(e,t){var n=this,r=null==t?void 0:t.appSyncGraphqlEndpoint;return new eM(function(e){if(t&&r){var i,o=!1,s=(0,ej.v4)(),a=function(){o||(o=!0,n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:s}).catch(function(e){tw.debug(l.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+e),n.connectionStateMonitor.record(eJ.CLOSED)}).finally(function(){o=!1}))};return i=new eM(function(e){n.reconnectionMonitor.addObserver(e)}).subscribe(function(){a()}),a(),function(){return ek(n,void 0,void 0,function(){var e,t;return ex(this,function(n){switch(n.label){case 0:null==i||i.unsubscribe(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this._waitForSubscriptionToBeConnected(s)];case 2:if(n.sent(),!(e=(this.subscriptionObserverMap.get(s)||{}).subscriptionState))return[2];if(e===h.CONNECTED)this._sendUnsubscriptionMessage(s);else throw Error("Subscription never connected");return[3,5];case 3:return t=n.sent(),tw.debug("Error while unsubscribing "+t),[3,5];case 4:return this._removeSubscriptionObserver(s),[7];case 5:return[2]}})})}}e.error({errors:[eC({},new tf("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t,n=e.options,r=e.observer,i=e.subscriptionId;return ek(this,void 0,void 0,function(){var e,o,s,a,c,u,l,p,d,v,y,g,b,_,m,E,S,T,O,I,N,w,C=this;return ex(this,function(A){switch(A.label){case 0:return e=n.appSyncGraphqlEndpoint,o=n.authenticationType,s=n.query,a=n.variables,c=n.apiKey,u=n.region,p=void 0===(l=n.graphql_headers)?function(){return{}}:l,v=void 0===(d=n.additionalHeaders)?{}:d,y=h.PENDING,g={query:s,variables:a},this.subscriptionObserverMap.set(i,{observer:r,query:null!=s?s:"",variables:null!=a?a:{},subscriptionState:y,startAckTimeoutId:void 0}),b=JSON.stringify(g),m=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:c,appSyncGraphqlEndpoint:e,authenticationType:o,payload:b,canonicalUri:"",region:u,additionalHeaders:v})];case 1:return E=[eC.apply(void 0,m.concat([A.sent()]))],[4,p()];case 2:_=eC.apply(void 0,[eC.apply(void 0,[eC.apply(void 0,E.concat([A.sent()])),v]),((w={})["x-amz-user-agent"]=tS.userAgent,w)]),S=JSON.stringify({id:i,payload:{data:b,extensions:{authorization:eC({},_)}},type:f.GQL_START}),A.label=3;case 3:return A.trys.push([3,5,,6]),this.connectionStateMonitor.record(eJ.OPENING_CONNECTION),[4,this._initializeWebSocketConnection({apiKey:c,appSyncGraphqlEndpoint:e,authenticationType:o,region:u,additionalHeaders:v})];case 4:return A.sent(),[3,6];case 5:return T=A.sent(),this._logStartSubscriptionError(i,r,T),[2];case 6:return I=(O=null!==(t=this.subscriptionObserverMap.get(i))&&void 0!==t?t:{}).subscriptionFailedCallback,N=O.subscriptionReadyCallback,this.subscriptionObserverMap.set(i,{observer:r,subscriptionState:y,query:null!=s?s:"",variables:null!=a?a:{},subscriptionReadyCallback:N,subscriptionFailedCallback:I,startAckTimeoutId:setTimeout(function(){C._timeoutStartSubscriptionAck.call(C,i)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(S),[2]}})})},t.prototype._logStartSubscriptionError=function(e,t,n){tw.debug({err:n});var r,i=null!==(r=n.message)&&void 0!==r?r:"";if(Promise.resolve(this.connectionStateMonitor.record(eJ.CLOSED)),this.connectionState!==p.ConnectionDisruptedPendingNetwork){(0,tT.m0)(n)?t.error({errors:[eC({},new tf(l.CONNECTION_FAILED+": "+i))]}):tw.debug(l.CONNECTION_FAILED+": "+i);var o=(this.subscriptionObserverMap.get(e)||{}).subscriptionFailedCallback;"function"==typeof o&&o()}},t.prototype._waitForSubscriptionToBeConnected=function(e){return ek(this,void 0,void 0,function(){var t,n=this;return ex(this,function(r){return(t=this.subscriptionObserverMap.get(e))&&t.subscriptionState===h.PENDING?[2,new Promise(function(r,i){var o=t.observer,s=t.subscriptionState,a=t.variables,c=t.query;n.subscriptionObserverMap.set(e,{observer:o,subscriptionState:s,variables:a,query:c,subscriptionReadyCallback:r,subscriptionFailedCallback:i})})]:[2]})})},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===d.READY){var t={id:e,type:f.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(r){tw.debug({err:r})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=d.CLOSED;return}if(this.connectionStateMonitor.record(eJ.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{tw.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);var e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=d.CLOSED,this.connectionStateMonitor.record(eJ.CLOSED)}}},t.prototype._handleIncomingSubscriptionMessage=function(e){var t=this;tw.debug("subscription message from AWS AppSync RealTime: "+e.data);var n=JSON.parse(e.data),r=n.id,i=void 0===r?"":r,o=n.payload,s=n.type,a=this.subscriptionObserverMap.get(i)||{},c=a.observer,u=void 0===c?null:c,p=a.query,d=void 0===p?"":p,v=a.variables,y=void 0===v?{}:v,g=a.startAckTimeoutId,b=a.subscriptionReadyCallback,_=a.subscriptionFailedCallback;if(tw.debug({id:i,observer:u,query:d,variables:y}),s===f.GQL_DATA&&o&&o.data){u?u.next(o):tw.debug("observer not found for id: "+i);return}if(s===f.GQL_START_ACK){tw.debug("subscription ready for "+JSON.stringify({query:d,variables:y})),"function"==typeof b&&b(),g&&clearTimeout(g),tC(l.SUBSCRIPTION_ACK,{query:d,variables:y},"Connection established for subscription");var m=h.CONNECTED;u&&this.subscriptionObserverMap.set(i,{observer:u,query:d,variables:y,startAckTimeoutId:void 0,subscriptionState:m,subscriptionReadyCallback:b,subscriptionFailedCallback:_}),this.connectionStateMonitor.record(eJ.CONNECTION_ESTABLISHED);return}if(s===f.GQL_CONNECTION_KEEP_ALIVE){this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout(function(){return t._errorDisconnect(l.TIMEOUT_DISCONNECT)},this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout(function(){t.connectionStateMonitor.record(eJ.KEEP_ALIVE_MISSED)},65e3),this.connectionStateMonitor.record(eJ.KEEP_ALIVE);return}if(s===f.GQL_ERROR){var m=h.FAILED;u&&(this.subscriptionObserverMap.set(i,{observer:u,query:d,variables:y,startAckTimeoutId:g,subscriptionReadyCallback:b,subscriptionFailedCallback:_,subscriptionState:m}),tw.debug(l.CONNECTION_FAILED+": "+JSON.stringify(o)),u.error({errors:[eC({},new tf(l.CONNECTION_FAILED+": "+JSON.stringify(o)))]}),g&&clearTimeout(g),"function"==typeof _&&_())}},t.prototype._errorDisconnect=function(e){tw.debug("Disconnect error: "+e),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(eJ.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=d.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e);if(t){var n=t.observer,r=t.query,i=t.variables;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:h.FAILED}),this.connectionStateMonitor.record(eJ.CLOSED),tw.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i}))}},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,o=e.region,s=e.additionalHeaders;if(this.socketStatus!==d.READY)return new Promise(function(e,a){return ek(t,void 0,void 0,function(){var t,c,u,l,p,f,h,v,y,g;return ex(this,function(b){switch(b.label){case 0:if(this.promiseArray.push({res:e,rej:a}),this.socketStatus!==d.CLOSED)return[3,5];b.label=1;case 1:return b.trys.push([1,4,,5]),this.socketStatus=d.CONNECTING,t="{}",l=(u=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:t,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:o,additionalHeaders:s})];case 2:return c=l.apply(u,[b.sent()]),p=tv.Buffer.from(c).toString("base64"),f=tv.Buffer.from(t).toString("base64"),h=null!=n?n:"",h=this.isCustomDomain(h)?h.concat("/realtime"):h.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),v=this.isSSLEnabled?"wss://":"ws://",y=(h=h.replace("https://",v).replace("http://",v))+"?header="+p+"&payload="+f,[4,this._initializeRetryableHandshake(y)];case 3:return b.sent(),this.promiseArray.forEach(function(e){var t=e.res;tw.debug("Notifying connection successful"),t()}),this.socketStatus=d.READY,this.promiseArray=[],[3,5];case 4:return g=b.sent(),tw.debug("Connection exited with",g),this.promiseArray.forEach(function(e){return(0,e.rej)(g)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=d.CLOSED,[3,5];case 5:return[2]}})})})},t.prototype._initializeRetryableHandshake=function(e){return ek(this,void 0,void 0,function(){return ex(this,function(t){switch(t.label){case 0:return tw.debug("Initializaling retryable Handshake"),[4,(0,tT.Xm)(this._initializeHandshake.bind(this),[e],5e3)];case 1:return t.sent(),[2]}})})},t.prototype._initializeHandshake=function(e){return ek(this,void 0,void 0,function(){var t,n,r,i=this;return ex(this,function(o){switch(o.label){case 0:tw.debug("Initializing handshake "+e),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,new Promise(function(t,n){var r=i.getNewWebSocket(e,"graphql-ws");r.onerror=function(){tw.debug("WebSocket connection error")},r.onclose=function(){n(Error("Connection handshake error"))},r.onopen=function(){return i.awsRealTimeSocket=r,t()}})];case 2:return o.sent(),[4,new Promise(function(e,t){if(i.awsRealTimeSocket){var n=!1;i.awsRealTimeSocket.onerror=function(e){tw.debug("WebSocket error "+JSON.stringify(e))},i.awsRealTimeSocket.onclose=function(e){tw.debug("WebSocket closed "+e.reason),t(Error(JSON.stringify(e)))},i.awsRealTimeSocket.onmessage=function(r){tw.debug("subscription message from AWS AppSyncRealTime: "+r.data+" ");var o=JSON.parse(r.data),s=o.type,a=o.payload,c=(void 0===a?{}:a).connectionTimeoutMs;if(s===f.GQL_CONNECTION_ACK){n=!0,i.awsRealTimeSocket&&(i.keepAliveTimeout=void 0===c?3e5:c,i.awsRealTimeSocket.onmessage=i._handleIncomingSubscriptionMessage.bind(i),i.awsRealTimeSocket.onerror=function(e){tw.debug(e),i._errorDisconnect(l.CONNECTION_CLOSED)},i.awsRealTimeSocket.onclose=function(e){tw.debug("WebSocket closed "+e.reason),i._errorDisconnect(l.CONNECTION_CLOSED)}),e("Cool, connected to AWS AppSyncRealTime");return}if(s===f.GQL_CONNECTION_ERROR){var u=o.payload,p=(void 0===u?{}:u).errors,h=eR(void 0===p?[]:p,1)[0],d=void 0===h?{}:h,v=d.errorType,y=d.errorCode;t({errorType:void 0===v?"":v,errorCode:void 0===y?0:y})}};var r={type:f.GQL_CONNECTION_INIT};i.awsRealTimeSocket.send(JSON.stringify(r));var o=function(e){e||(i.connectionStateMonitor.record(eJ.CONNECTION_FAILED),t(Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(function(){return o(n)},15e3)}})];case 3:return o.sent(),[3,5];case 4:if(n=(t=o.sent()).errorType,r=t.errorCode,eQ.includes(r))throw new tT.V2(n);if(n)throw Error(n);throw t;case 5:return[2]}})})},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region,a=e.additionalHeaders;return ek(this,void 0,void 0,function(){var e,c,u;return ex(this,function(l){switch(l.label){case 0:if(e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},!(!t||!e[t]))return[3,1];return tw.debug("Authentication type "+t+" not supported"),[2,""];case 1:return c=e[t],u=td.parse(null!=i?i:"").host,tw.debug("Authenticating with "+t),[4,c({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:u,additionalHeaders:a})];case 2:return[2,l.sent()]}})})},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return ek(this,void 0,void 0,function(){return ex(this,function(e){switch(e.label){case 0:return[4,tN.g.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return ek(this,void 0,void 0,function(){var e,n,r;return ex(this,function(i){switch(i.label){case 0:return[4,tI._.getItem("federatedInfo")];case 1:if(!(n=i.sent()))return[3,2];return e=n.token,[3,4];case 2:return[4,tN.g.currentAuthenticatedUser()];case 3:(r=i.sent())&&(e=r.token),i.label=4;case 4:if(!e)throw Error("No federated jwt");return[2,{Authorization:e,host:t}]}})})},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return ek(this,void 0,void 0,function(){return ex(this,function(e){return[2,{host:n,"x-amz-date":new Date().toISOString().replace(/[:\-]|\.\d{3}/g,""),"x-api-key":t}]})})},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return ek(this,void 0,void 0,function(){var e,o,s;return ex(this,function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw Error("No credentials");return[4,em.c.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:eC({},eX)},[2,tO.E.sign(s,o,e).headers]}})})},t.prototype._customAuthHeader=function(e){var t=e.host,n=e.additionalHeaders;if(!n||!n.Authorization)throw Error("No auth token specified");return{Authorization:n.Authorization,host:t}},t.prototype._ensureCredentials=function(){return em.c.get().then(function(e){if(!e)return!1;var t=em.c.shear(e);return tw.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0}).catch(function(e){return tw.warn("ensure credentials error",e),!1})},t}(eF),tx=(0,eL.lC)().isNode,tR=new e_.k("PubSub"),tP=new(function(){function e(e){this._options=null!=e?e:{},tR.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new e6(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new tk(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return tR.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},e.prototype.addPluggable=function(e){return ek(this,void 0,void 0,function(){return ex(this,function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]})})},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==e})},e.prototype.getProviderByName=function(e){return e===eT?this.awsAppSyncProvider:e===eO?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(t){return t.getProviderName()===e})},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw Error("Could not find provider named "+t);return[n]},e.prototype.publish=function(e,t,n){return ek(this,void 0,void 0,function(){return ex(this,function(r){return[2,Promise.all(this.getProviders(n).map(function(r){return r.publish(e,t,n)}))]})})},e.prototype.subscribe=function(e,t){if(tx&&this._options&&this._options.ssr)throw Error("Subscriptions are not supported for Server-Side Rendering (SSR)");tR.debug("subscribe options",t);var n=this.getProviders(t);return new eM(function(r){var i=n.map(function(n){return{provider:n,observable:n.subscribe(e,t)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return r.next({provider:t,value:e})},error:function(e){return r.error({provider:t,error:e})}})});return function(){return i.forEach(function(e){return e.unsubscribe()})}})},e}());eI.d.register(tP),(u=y||(y={})).NO_API_KEY="No api-key configured",u.NO_CURRENT_USER="No current user",u.NO_CREDENTIALS="No credentials",u.NO_FEDERATED_JWT="No federated jwt",u.NO_AUTH_TOKEN="No auth token specified";var tD=n(1445),tM=new e_.k("GraphQLAPI"),tL=function(e,t,n,r){return void 0===t&&(t={}),{query:e,variables:t,authToken:n,userAgentSuffix:r}},tU=function(){function e(e){this._api=null,this.Auth=tN.g,this.Cache=tI._,this.Credentials=em.c,this._options=e,tM.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=g(g({},function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}(t,["API"])),void 0===n?{}:n);return tM.debug("configure GraphQL API",{opt:r}),r.aws_project_region&&(r=Object.assign({},r,{region:r.aws_project_region,header:{}})),void 0!==r.graphql_headers&&"function"!=typeof r.graphql_headers&&(tM.warn("graphql_headers should be a function"),r.graphql_headers=void 0),this._options=Object.assign({},this._options,r),this.createInstance(),this._options},e.prototype.createInstance=function(){return(tM.debug("create Rest instance"),this._options)?(this._api=new tD.H(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e,t){return void 0===t&&(t={}),b(this,void 0,void 0,function(){var n,r,i,o,s,a,c;return _(this,function(u){switch(u.label){case 0:switch(r=(n=this._options).aws_appsync_authenticationType,i=n.aws_appsync_apiKey,o={},e||r||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!i)throw Error(y.NO_API_KEY);return o={Authorization:null,"X-Api-Key":i},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!u.sent())throw Error(y.NO_CREDENTIALS);return[3,17];case 4:return u.trys.push([4,9,,10]),s=void 0,[4,tI._.getItem("federatedInfo")];case 5:if(!(a=u.sent()))return[3,6];return s=a.token,[3,8];case 6:return[4,tN.g.currentAuthenticatedUser()];case 7:(c=u.sent())&&(s=c.token),u.label=8;case 8:if(!s)throw Error(y.NO_FEDERATED_JWT);return o={Authorization:s},[3,10];case 9:case 13:throw u.sent(),Error(y.NO_CURRENT_USER);case 10:case 14:return[3,17];case 11:return u.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return o={Authorization:u.sent().getAccessToken().getJwtToken()},[3,14];case 15:if(!t.Authorization)throw Error(y.NO_AUTH_TOKEN);return o={Authorization:t.Authorization},[3,17];case 16:return o={Authorization:null},[3,17];case 17:return[2,o]}})})},e.prototype.getGraphqlOperationType=function(e){return m(ei(e).definitions,1)[0].operation},e.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=e.authToken,a=e.userAgentSuffix,c="string"==typeof n?ei(n):ei(el(n)),u=m(c.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],l=(void 0===u?{}:u).operation,p=t||{};switch(s&&(p.Authorization=s),l){case"query":case"mutation":this.createInstanceIfNotCreated();var f=this._api.getCancellableToken(),h=this._graphql({query:c,variables:i,authMode:o,userAgentSuffix:a},p,{cancellableToken:f});return this._api.updateRequestToBeCancellable(h,f),h;case"subscription":return this._graphqlSubscribe({query:c,variables:i,authMode:o},p);default:throw Error("invalid operation type: "+l)}},e.prototype._graphql=function(e,t,n){var r=e.query,i=e.variables,o=e.authMode,s=e.userAgentSuffix;return void 0===t&&(t={}),void 0===n&&(n={}),b(this,void 0,void 0,function(){var e,a,c,u,l,p,f,h,d,v,y,b,m,E,S,T,O,I,N;return _(this,function(_){switch(_.label){case 0:if(this.createInstanceIfNotCreated(),a=(e=this._options).aws_appsync_region,c=e.aws_appsync_graphqlEndpoint,l=void 0===(u=e.graphql_headers)?function(){return{}}:u,p=e.graphql_endpoint,f=e.graphql_endpoint_iam_region,h=[{}],!(d=!p))return[3,2];return[4,this._headerBasedAuth(o,t)];case 1:d=_.sent(),_.label=2;case 2:if(v=[g.apply(void 0,h.concat([d]))],!(y=p))return[3,6];if(!f)return[3,4];return[4,this._headerBasedAuth(o,t)];case 3:return b=_.sent(),[3,5];case 4:b={Authorization:null},_.label=5;case 5:y=b,_.label=6;case 6:return m=[g.apply(void 0,v.concat([y]))],[4,l({query:r,variables:i})];case 7:if(E=Object.assign({headers:g.apply(void 0,[g.apply(void 0,[g.apply(void 0,m.concat([_.sent()])),t]),!p&&((N={})["x-amz-user-agent"]=(0,eE.Z)(s),N)]),body:{query:el(r),variables:i},signerServiceInfo:{service:p?"execute-api":"appsync",region:p?f:a}},n),!(S=p||c))throw{data:{},errors:[new U("No graphql endpoint provided.")]};_.label=8;case 8:return _.trys.push([8,10,,11]),[4,this._api.post(S,E)];case 9:return T=_.sent(),[3,11];case 10:if(O=_.sent(),this._api.isCancel(O))throw O;return T={data:{},errors:[new U(O.message,null,null,null,null,O)]},[3,11];case 11:if((I=T.errors)&&I.length)throw T;return[2,T]}})})},e.prototype.createInstanceIfNotCreated=function(){return b(this,void 0,void 0,function(){return _(this,function(e){switch(e.label){case 0:if(this._api)return[3,2];return[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode,o=e.authToken;void 0===t&&(t={});var s=this._options,a=s.aws_appsync_region,c=s.aws_appsync_graphqlEndpoint,u=s.aws_appsync_authenticationType,l=s.aws_appsync_apiKey,p=s.graphql_headers;if(tP&&"function"==typeof tP.subscribe)return tP.subscribe("",{provider:eO,appSyncGraphqlEndpoint:c,authenticationType:i||u||"AWS_IAM",apiKey:l,query:el(n),region:a,variables:r,graphql_headers:void 0===p?function(){return{}}:p,additionalHeaders:t,authToken:o});throw tM.debug("No pubsub module applied for subscription"),Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then(function(t){if(!t)return!1;var n=e.Credentials.shear(t);return tM.debug("set credentials for api",n),!0}).catch(function(e){return tM.warn("ensure credentials error",e),!1})},e}(),tj=new tU(null);eI.d.register(tj)},1445:function(e,t,n){"use strict";n.d(t,{H:function(){return h}});var r=n(3119),i=n(3769),o=n(9654),s=n(2752),a=n(4018),c=n(633),u=n(731),l=n.n(u),p=n(1987),f=new i.k("RestClient"),h=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=o.c,this._options=e,f.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var i,o,c,u,l,h,d,v,y,g,b,_,m,E=this;return(0,r.Jh)(this,function(S){switch(S.label){case 0:if(f.debug(t,e),c="us-east-1",u="execute-api",l=void 0,"string"==typeof e?(i=this._parseUrl(e),o=e):(o=e.endpoint,l=e.custom_header,c=e.region,u=e.service,i=this._parseUrl(e.endpoint)),h={method:t,url:o,host:i.host,path:i.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},d={},s.t.isReactNative&&(d={"User-Agent":s.t.userAgent||"aws-amplify/0.1.x"}),y=(v=Object.assign({},n)).response,v.body&&("function"==typeof FormData&&v.body instanceof FormData?(d["Content-Type"]="multipart/form-data",h.data=v.body):(d["Content-Type"]="application/json; charset=UTF-8",h.data=JSON.stringify(v.body))),v.responseType&&(h.responseType=v.responseType),v.withCredentials&&(h.withCredentials=v.withCredentials),v.timeout&&(h.timeout=v.timeout),v.cancellableToken&&(h.cancelToken=v.cancellableToken.token),h.signerServiceInfo=v.signerServiceInfo,"function"!=typeof l)return[3,2];return[4,l()];case 1:return b=S.sent(),[3,3];case 2:b=void 0,S.label=3;case 3:if(g=b,h.headers=(0,r.pi)((0,r.pi)((0,r.pi)({},d),g),v.headers),(_=(0,p.parse)(o,!0,!0)).search,m=(0,r._T)(_,["search"]),h.url=(0,p.format)((0,r.pi)((0,r.pi)({},m),{query:(0,r.pi)((0,r.pi)({},m.query),v.queryStringParameters||{})})),void 0!==h.headers.Authorization)return h.headers=Object.keys(h.headers).reduce(function(e,t){return h.headers[t]&&(e[t]=h.headers[t]),e},{}),[2,this._request(h,y)];return[2,this.Credentials.get().then(function(i){return E._signed((0,r.pi)({},h),i,y,{region:c,service:u}).catch(function(r){if(a.E.isClockSkewError(r)){var i=r.response.headers,o=i&&(i.date||i.Date),s=new Date(o),c=a.E.getDateFromHeaderString(h.headers["x-amz-date"]);if(a.E.isClockSkewed(s))return a.E.setClockOffset(s.getTime()-c.getTime()),E.ajax(e,t,n)}throw r})},function(e){return f.debug("No credentials available, the request will be unsigned"),E._request(h,y)})]}})})},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return!!n&&(n.cancel(t),!0)},e.prototype.hasCancelToken=function(e){return this._cancelTokenMap.has(e)},e.prototype.isCancel=function(e){return l().isCancel(e)},e.prototype.getCancellableToken=function(){return l().CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)&&n.forEach(function(n){n.name===e&&(r=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),"string"==typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"==typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)}),r},e.prototype._signed=function(e,t,n,i){var o=i.service,s=i.region,a=e.signerServiceInfo,u=(0,r._T)(e,["signerServiceInfo"]),p=s||this._region||this._options.region,h=o||this._service||this._options.service,d={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},v=Object.assign({region:p,service:h},a),y=c.E.sign(u,d,v);return y.data&&(y.body=y.data),f.debug("Signed Request: ",y),delete y.headers.host,l()(y).then(function(e){return n?e:e.data}).catch(function(e){throw f.debug(e),e})},e.prototype._request=function(e,t){return void 0===t&&(t=!1),l()(e).then(function(e){return t?e:e.data}).catch(function(e){throw f.debug(e),e})},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}()},731:function(e,t,n){e.exports=n(317)},5660:function(e,t,n){"use strict";var r=n(606),i=n(4813),o=n(8218),s=n(1283),a=n(9238),c=n(7318),u=n(2975),l=n(5709),p=n(1940),f=n(2446);e.exports=function(e){return new Promise(function(t,n){var h,d=e.data,v=e.headers,y=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}r.isFormData(d)&&delete v["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(_+":"+m)}var E=a(e.baseURL,e.url);function S(){if(b){var r="getAllResponseHeaders"in b?c(b.getAllResponseHeaders()):null;i(function(e){t(e),g()},function(e){n(e),g()},{data:y&&"text"!==y&&"json"!==y?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b}),b=null}}if(b.open(e.method.toUpperCase(),s(E,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(S)},b.onabort=function(){b&&(n(l("Request aborted",e,"ECONNABORTED",b)),b=null)},b.onerror=function(){n(l("Network Error",e,null,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||p.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},r.isStandardBrowserEnv()){var T=(e.withCredentials||u(E))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;T&&(v[e.xsrfHeaderName]=T)}"setRequestHeader"in b&&r.forEach(v,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete v[t]:b.setRequestHeader(t,e)}),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),y&&"json"!==y&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){b&&(n(!e||e&&e.type?new f("canceled"):e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),d||(d=null),b.send(d)})}},317:function(e,t,n){"use strict";var r=n(606),i=n(6574),o=n(6527),s=n(1988),a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(1940));a.Axios=o,a.Cancel=n(2446),a.CancelToken=n(79),a.isCancel=n(2710),a.VERSION=n(6641).version,a.all=function(e){return Promise.all(e)},a.spread=n(8433),a.isAxiosError=n(1323),e.exports=a,e.exports.default=a},2446:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},79:function(e,t,n){"use strict";var r=n(2446);function i(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;this.promise.then(function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}}),this.promise.then=function(e){var t,r=new Promise(function(e){n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},2710:function(e){"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},6527:function(e,t,n){"use strict";var r=n(606),i=n(1283),o=n(2683),s=n(7092),a=n(1988),c=n(7406),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n,r=t.transitional;void 0!==r&&c.assertOptions(r,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});var l=[];if(this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)}),!o){var p=[s,void 0];for(Array.prototype.unshift.apply(p,i),p=p.concat(l),n=Promise.resolve(t);p.length;)n=n.then(p.shift(),p.shift());return n}for(var f=t;i.length;){var h=i.shift(),d=i.shift();try{f=h(f)}catch(v){d(v);break}}try{n=s(f)}catch(y){return Promise.reject(y)}for(;l.length;)n=n.then(l.shift(),l.shift());return n},l.prototype.getUri=function(e){return i((e=a(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}}),r.forEach(["post","put","patch"],function(e){l.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}}),e.exports=l},2683:function(e,t,n){"use strict";var r=n(606);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},9238:function(e,t,n){"use strict";var r=n(589),i=n(7110);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},5709:function(e,t,n){"use strict";var r=n(6546);e.exports=function(e,t,n,i,o){return r(Error(e),t,n,i,o)}},7092:function(e,t,n){"use strict";var r=n(606),i=n(6755),o=n(2710),s=n(1940),a=n(2446);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!o(t)&&(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},6546:function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},1988:function(e,t,n){"use strict";var r=n(606);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),function(e){var t=u[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)}),n}},4813:function(e,t,n){"use strict";var r=n(5709);e.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},6755:function(e,t,n){"use strict";var r=n(606),i=n(1940);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,function(n){e=n.call(o,e,t)}),e}},1940:function(e,t,n){"use strict";var r,i=n(3454),o=n(606),s=n(3613),a=n(6546),c={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?r=n(5660):void 0!==i&&"[object process]"===Object.prototype.toString.call(i)&&(r=n(5660)),r),transformRequest:[function(e,t){return(s(t,"Accept"),s(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e))?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)||t&&"application/json"===t["Content-Type"]?(u(t,"application/json"),function(e,t,n){if(o.isString(e))try{return(0,JSON.parse)(e),o.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(i){if("SyntaxError"===s.name)throw a(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],function(e){l.headers[e]={}}),o.forEach(["post","put","patch"],function(e){l.headers[e]=o.merge(c)}),e.exports=l},6641:function(e){e.exports={version:"0.26.0"}},6574:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},1283:function(e,t,n){"use strict";var r=n(606);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var o,s=[];r.forEach(t,function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))}))}),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7110:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},8218:function(e,t,n){"use strict";var r=n(606);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},589:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},1323:function(e,t,n){"use strict";var r=n(606);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},2975:function(e,t,n){"use strict";var r=n(606);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},3613:function(e,t,n){"use strict";var r=n(606);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},7318:function(e,t,n){"use strict";var r=n(606),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e&&r.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t&&!(s[t]&&i.indexOf(t)>=0)&&("set-cookie"===t?s[t]=(s[t]?s[t]:[]).concat([n]):s[t]=s[t]?s[t]+", "+n:n)}),s}},8433:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7406:function(e,t,n){"use strict";var r=n(6641).version,i={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw TypeError("option "+o+" must be "+c);continue}if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},606:function(e,t,n){"use strict";var r=n(6574),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function s(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function p(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}}e.exports={isArray:o,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)p(arguments[r],n);return t},extend:function(e,t,n){return p(t,function(t,i){n&&"function"==typeof t?e[i]=r(t,n):e[i]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},3119:function(e,t,n){"use strict";n.d(t,{Jh:function(){return s},_T:function(){return i},mG:function(){return o},pi:function(){return r}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}},8791:function(e,t,n){"use strict";n.d(t,{b:function(){return y}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=n(2183),o=n(7360),s=n(3119),a=n(1445),c=n(3769),u=n(9654),l=n(5387),p=new c.k("RestAPI"),f=function(){function e(e){this._api=null,this.Credentials=u.c,this._options=e,p.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=(0,s._T)(t,["API"]),i=(0,s.pi)((0,s.pi)({},r),void 0===n?{}:n);if(p.debug("configure Rest API",{opt:i}),i.aws_project_region){if(i.aws_cloud_logic_custom){var o=i.aws_cloud_logic_custom;i.endpoints="string"==typeof o?JSON.parse(o):o}i=Object.assign({},i,{region:i.aws_project_region,header:{}})}return Array.isArray(i.endpoints)?i.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(p.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?i.endpoints=this._options.endpoints:i.endpoints=[],this._options=Object.assign({},this._options,i),this.createInstance(),this._options},e.prototype.createInstance=function(){return p.debug("create Rest API instance"),this._api=new a.H(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype.endpoint=function(e){return(0,s.mG)(this,void 0,void 0,function(){return(0,s.Jh)(this,function(t){return[2,this._api.endpoint(e)]})})},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw Error("API category not configured");var r=n.find(function(t){return t.name===e});if(!r)throw Error("API "+e+" does not exist");var i={endpoint:r.endpoint+t};return"string"==typeof r.region?i.region=r.region:"string"==typeof this._options.region&&(i.region=this._options.region),"string"==typeof r.service?i.service=r.service||"execute-api":i.service="execute-api","function"==typeof r.custom_header?i.custom_header=r.custom_header:i.custom_header=void 0,i},e}(),h=new f(null);l.d.register(h);var d=n(4511),v=new c.k("API"),y=new(function(){function e(e){this.Auth=i.g,this.Cache=o._,this.Credentials=u.c,this._options=e,this._restApi=new f(e),this._graphqlApi=new d.xC(e),v.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return r(r({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.hasCancelToken(e)?this._restApi.cancel(e,t):!!this._graphqlApi.hasCancelToken(e)&&this._graphqlApi.cancel(e,t)},e.prototype.endpoint=function(e){var t,n,r,i;return t=this,n=void 0,r=void 0,i=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){return[2,this._restApi.endpoint(e)]})},new(r||(r=Promise))(function(e,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i.throw(e))}catch(t){o(t)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,a)}c((i=i.apply(t,n||[])).next())})},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},e}())(null);l.d.register(y)},7360:function(e,t,n){"use strict";n.d(t,{_:function(){return d}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},i=n(3769),o=n(5387),s={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:new(n(6648)).c().getStorage()};function a(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function c(){return new Date().getTime()}function u(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var l={};!function(){function e(){}e.clear=function(){l={}},e.getItem=function(e){return l[e]||null},e.setItem=function(e,t){l[e]=t},e.removeItem=function(e){delete l[e]}}();var p=new i.k("StorageCache"),f=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){u(this.config.capacityInBytes)||(p.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=s.capacityInBytes),u(this.config.itemMaxSize)||(p.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=s.itemMaxSize),u(this.config.defaultTTL)||(p.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=s.defaultTTL),u(this.config.defaultPriority)||(p.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=s.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(p.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=s.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(p.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=s.defaultPriority),(Number(this.config.warningThreshold)>1||0>Number(this.config.warningThreshold))&&(p.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=s.warningThreshold),this.config.capacityInBytes>5242880&&(p.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=s.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:c(),visitedTime:c(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=a(JSON.stringify(r)),r.byteSize=a(JSON.stringify(r)),r},e.prototype.configure=function(e){return e&&(e.keyPrefix&&p.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},e}(),h=new i.k("Cache"),d=new(function(e){function t(t){var n=this,r=t?Object.assign({},s,t):s;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return!function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=c(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=JSON.parse(this.config.storage.getItem(e));return c()>=t.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(n){this._decreaseCurSizeInBytes(t.byteSize),h.error("Failed to set item "+n)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(var n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}n.sort(function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1});for(var i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){h.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey){h.warn("Invalid key: should not be empty or 'CurSize'");return}if(void 0===t){h.warn("The value of item should not be undefined!");return}var i={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+c()};if(i.priority<1||i.priority>5){h.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");return}var o=this.fillCacheItem(r,t,i);if(o.byteSize>this.config.itemMaxSize){h.warn("Item with key: "+e+" you are trying to put into is too big!");return}try{var s=this.config.storage.getItem(r);if(s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(o.byteSize)){var a=this._findValidKeys();if(this._isCacheFull(o.byteSize)){var u=this._sizeToPop(o.byteSize);this._popOutItems(a,u)}}this._setItem(r,o)}catch(l){h.warn("setItem failed! "+l)}},t.prototype.getItem=function(e,t){h.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return h.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(n=this.config.storage.getItem(r),null!=n){if(this._isExpired(r))this._removeItem(r,JSON.parse(n).byteSize),n=null;else{var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(s){return h.warn("getItem failed! "+s),null}},t.prototype.removeItem=function(e){h.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(r){h.warn("removeItem failed! "+r)}},t.prototype.clear=function(){h.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(var t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(r){h.warn("clear failed! "+r)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==s.keyPrefix||(h.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=c.toString()),new t(e)},t}(f));o.d.register(d)},633:function(e,t,n){"use strict";n.d(t,{E:function(){return m}});var r=n(8008),i=n(3769),o=n(1938),s=n(5644),a=n(1987),c=n(4018),u=new i.k("Signer"),l="AWS4-HMAC-SHA256",p=function(e,t){var n=new o.Sha256(e);return n.update(t),n.digestSync()},f=function(e){var t=new o.Sha256;return t.update(e||""),(0,s.N)(t.digestSync())},h=function(e){return Object.keys(e).map(function(e){return e.toLowerCase()}).sort().join(";")},d=function(e){var t,n,r=(0,a.parse)(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(t=r.query)&&0!==t.length?t.split("&").map(function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()});return t[0]+"="+n}).sort(function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1}).join("&"):"",(n=e.headers)&&0!==Object.keys(n).length?Object.keys(n).map(function(e){return{key:e.toLowerCase(),value:n[e]?n[e].trim().replace(/\s+/g," "):""}}).sort(function(e,t){return e.key<t.key?-1:1}).map(function(e){return e.key+":"+e.value}).join("\n")+"\n":"",h(e.headers),f(e.data)].join("\n")},v=function(e){var t=((0,a.parse)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},y=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},g=function(e,t,n,r){return[e,n,r,f(t)].join("\n")},b=function(e,t,n){u.debug(n);var r=p("AWS4"+e,t),i=p(r,n.region),o=p(i,n.service);return p(o,"aws4_request")},_=function(e,t){return(0,s.N)(p(e,t))},m=function(){function e(){}return e.sign=function(e,t,n){if(void 0===n&&(n=null),e.headers=e.headers||{},e.body&&!e.data)throw Error('The attribute "body" was found on the request object. Please use the attribute "data" instead.');var r,i,o=c.E.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),s=o.substr(0,8),p=(0,a.parse)(e.url);e.headers.host=p.host,e.headers["x-amz-date"]=o,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var f=d(e);u.debug(f);var m=n||v(e),E=y(s,m.region,m.service),S=g(l,f,o,E),T=_(b(t.secret_key,s,m),S),O=(r=t.access_key,i=h(e.headers),[l+" Credential="+r+"/"+E,"SignedHeaders="+i,"Signature="+T].join(", "));return e.headers.Authorization=O,e},e.signUrl=function(e,t,n,i){var o="object"==typeof e?e.url:e,s="object"==typeof e?e.method:"GET",u="object"==typeof e?e.body:void 0,p=c.E.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),f=p.substr(0,8),h=(0,a.parse)(o,!0,!0),m=(h.search,(0,r._T)(h,["search"])),E={host:m.host},S=n||v({url:(0,a.format)(m)}),T=S.region,O=S.service,I=y(f,T,O),N=t.session_token&&"iotdevicegateway"!==O,w=(0,r.pi)((0,r.pi)((0,r.pi)({"X-Amz-Algorithm":l,"X-Amz-Credential":[t.access_key,I].join("/"),"X-Amz-Date":p.substr(0,16)},N?{"X-Amz-Security-Token":""+t.session_token}:{}),i?{"X-Amz-Expires":""+i}:{}),{"X-Amz-SignedHeaders":Object.keys(E).join(",")}),C=d({method:s,url:(0,a.format)((0,r.pi)((0,r.pi)({},m),{query:(0,r.pi)((0,r.pi)({},m.query),w)})),headers:E,data:u}),A=g(l,C,p,I),k=_(b(t.secret_key,f,{region:T,service:O}),A),x=(0,r.pi)({"X-Amz-Signature":k},t.session_token&&{"X-Amz-Security-Token":t.session_token});return(0,a.format)({protocol:m.protocol,slashes:!0,hostname:m.hostname,port:m.port,pathname:m.pathname,query:(0,r.pi)((0,r.pi)((0,r.pi)({},m.query),w),x)})},e}()},4018:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r=n(8008),i={clockOffset:0,getDateWithClockOffset:function(){return i.clockOffset?new Date(new Date().getTime()+i.clockOffset):new Date},getClockOffset:function(){return i.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=i.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=(0,r.CR)(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6];return new Date(Date.UTC(Number(n),Number(i)-1,Number(o),Number(s),Number(a),Number(c)))},isClockSkewed:function(e){return Math.abs(e.getTime()-i.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(e){i.clockOffset=e}}},8295:function(e,t,n){e.exports=function(e){var t,n=e.localStorage||(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}}),r={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},i=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(t.hasOwnProperty(n)){if(typeof e[n]!==t[n])throw Error(c(s.INVALID_TYPE,[typeof e[n],n]))}else{var r="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(r=r+" "+i);throw Error(r)}}},o=function(e,t){return function(){return e.apply(t,arguments)}},s={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},a={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},c=function(e,t){var n,r,i=e.text;if(t){for(var o=0;o<t.length;o++)if(n="{"+o+"}",(r=i.indexOf(n))>0){var s=i.substring(0,r),a=i.substring(r+n.length);i=s+t[o]+a}}return i},u=[0,6,77,81,73,115,100,112,3],l=[0,4,77,81,84,84,4],p=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function f(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function h(e,t,n,r){return r=f(t,n,r),y(e,n,r),r+t}function d(e,t){return 256*e[t]+e[t+1]}function v(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function y(e,t,n){for(var r=n,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(55296<=o&&o<=56319){var a=e.charCodeAt(++i);if(isNaN(a))throw Error(c(s.MALFORMED_UNICODE,[o,a]));o=(o-55296<<10)+(a-56320)+65536}o<=127?t[r++]=o:o<=2047?(t[r++]=o>>6&31|192,t[r++]=63&o|128):o<=65535?(t[r++]=o>>12&15|224,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>18&7|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t}function g(e,t,n){for(var r,i="",o=t;o<t+n;){var a=e[o++];if(a<128)r=a;else{var u=e[o++]-128;if(u<0)throw Error(c(s.MALFORMED_UTF,[a.toString(16),u.toString(16),""]));if(a<224)r=64*(a-192)+u;else{var l=e[o++]-128;if(l<0)throw Error(c(s.MALFORMED_UTF,[a.toString(16),u.toString(16),l.toString(16)]));if(a<240)r=4096*(a-224)+64*u+l;else{var p=e[o++]-128;if(p<0)throw Error(c(s.MALFORMED_UTF,[a.toString(16),u.toString(16),l.toString(16),p.toString(16)]));if(a<248)r=262144*(a-240)+4096*u+64*l+p;else throw Error(c(s.MALFORMED_UTF,[a.toString(16),u.toString(16),l.toString(16),p.toString(16)]))}}}r>65535&&(r-=65536,i+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),i+=String.fromCharCode(r)}return i}p.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,i=[],o=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case r.CONNECT:switch(this.mqttVersion){case 3:n+=u.length+3;break;case 4:n+=l.length+3}n+=v(this.clientId)+2,void 0!==this.willMessage&&(n+=v(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(a)),n+=e.byteLength+2),void 0!==this.userName&&(n+=v(this.userName)+2),void 0!==this.password&&(n+=v(this.password)+2);break;case r.SUBSCRIBE:t|=2;for(var s=0;s<this.topics.length;s++)i[s]=v(this.topics[s]),n+=i[s]+2;n+=this.requestedQos.length;break;case r.UNSUBSCRIBE:t|=2;for(var s=0;s<this.topics.length;s++)i[s]=v(this.topics[s]),n+=i[s]+2;break;case r.PUBREL:t|=2;break;case r.PUBLISH:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(o=v(this.payloadMessage.destinationName))+2;var a=this.payloadMessage.payloadBytes;n+=a.byteLength,a instanceof ArrayBuffer?a=new Uint8Array(a):a instanceof Uint8Array||(a=new Uint8Array(a.buffer));case r.DISCONNECT:}var c=function(e){var t=[,],n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),p=c.length+1,d=new ArrayBuffer(n+p),y=new Uint8Array(d);if(y[0]=t,y.set(c,1),this.type==r.PUBLISH)p=h(this.payloadMessage.destinationName,o,y,p);else if(this.type==r.CONNECT){switch(this.mqttVersion){case 3:y.set(u,p),p+=u.length;break;case 4:y.set(l,p),p+=l.length}var g=0;this.cleanSession&&(g=2),void 0!==this.willMessage&&(g|=4,g|=this.willMessage.qos<<3,this.willMessage.retained&&(g|=32)),void 0!==this.userName&&(g|=128),void 0!==this.password&&(g|=64),y[p++]=g,p=f(this.keepAliveInterval,y,p)}switch(void 0!==this.messageIdentifier&&(p=f(this.messageIdentifier,y,p)),this.type){case r.CONNECT:p=h(this.clientId,v(this.clientId),y,p),void 0!==this.willMessage&&(p=h(this.willMessage.destinationName,v(this.willMessage.destinationName),y,p),p=f(e.byteLength,y,p),y.set(e,p),p+=e.byteLength),void 0!==this.userName&&(p=h(this.userName,v(this.userName),y,p)),void 0!==this.password&&(p=h(this.password,v(this.password),y,p));break;case r.PUBLISH:y.set(a,p);break;case r.SUBSCRIBE:for(var s=0;s<this.topics.length;s++)p=h(this.topics[s],i[s],y,p),y[p++]=this.requestedQos[s];break;case r.UNSUBSCRIBE:for(var s=0;s<this.topics.length;s++)p=h(this.topics[s],i[s],y,p)}return d};var b=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new p(r.PINGREQ).encode(),i=function(e){return function(){return o.apply(e)}},o=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(i(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(s.PING_TIMEOUT.code,c(s.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(i(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},_=function(e,t,n,r){t||(t=30),this.timeout=setTimeout(function(){return n.apply(e,r)},1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},m=function(t,r,i,o,a){if(!("WebSocket"in e&&null!==e.WebSocket))throw Error(c(s.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw Error(c(s.UNSUPPORTED,["ArrayBuffer"]));for(var u in this._trace("Paho.Client",t,r,i,o,a),this.host=r,this.port=i,this.path=o,this.uri=t,this.clientId=a,this._wsuri=null,this._localKey=r+":"+i+("/mqtt"!=o?":"+o:"")+":"+a+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)(0===u.indexOf("Sent:"+this._localKey)||0===u.indexOf("Received:"+this._localKey))&&this.restore(u)};m.prototype.host=null,m.prototype.port=null,m.prototype.path=null,m.prototype.uri=null,m.prototype.clientId=null,m.prototype.socket=null,m.prototype.connected=!1,m.prototype.maxMessageIdentifier=65536,m.prototype.connectOptions=null,m.prototype.hostIndex=null,m.prototype.onConnected=null,m.prototype.onConnectionLost=null,m.prototype.onMessageDelivered=null,m.prototype.onMessageArrived=null,m.prototype.traceFunction=null,m.prototype._msg_queue=null,m.prototype._buffered_msg_queue=null,m.prototype._connectTimeout=null,m.prototype.sendPinger=null,m.prototype.receivePinger=null,m.prototype._reconnectInterval=1,m.prototype._reconnecting=!1,m.prototype._reconnectTimeout=null,m.prototype.disconnectedPublishing=!1,m.prototype.disconnectedBufferSize=5e3,m.prototype.receiveBuffer=null,m.prototype._traceBuffer=null,m.prototype._MAX_TRACE_ENTRIES=100,m.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected||this.socket)throw Error(c(s.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},m.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw Error(c(s.INVALID_STATE,["not connected"]));var n=new p(r.SUBSCRIBE);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var i=0;i<n.topics.length;i++)n.requestedQos[i]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:c(e)})}),t.timeout&&(n.timeOut=new _(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:s.SUBSCRIBE_TIMEOUT.code,errorMessage:c(s.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},m.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw Error(c(s.INVALID_STATE,["not connected"]));var n=new p(r.UNSUBSCRIBE);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new _(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:s.UNSUBSCRIBE_TIMEOUT.code,errorMessage:c(s.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},m.prototype.send=function(e){this._trace("Client.send",e);var t=new p(r.PUBLISH);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else if(this._reconnecting&&this.disconnectedPublishing){if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw Error(c(s.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}else throw Error(c(s.INVALID_STATE,["not connected"]))},m.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw Error(c(s.INVALID_STATE,["not connecting or connected"]));var e=new p(r.DISCONNECT);this._notify_msg_sent[e]=o(this._disconnected,this),this._schedule_message(e)},m.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},m.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},m.prototype.stopTrace=function(){delete this._traceBuffer},m.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=o(this._on_socket_open,this),this.socket.onmessage=o(this._on_socket_message,this),this.socket.onerror=o(this._on_socket_error,this),this.socket.onclose=o(this._on_socket_close,this),this.sendPinger=new b(this,this.connectOptions.keepAliveInterval),this.receivePinger=new b(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new _(this,this.connectOptions.timeout,this._disconnected,[s.CONNECT_TIMEOUT.code,c(s.CONNECT_TIMEOUT)])},m.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},m.prototype.store=function(e,t){var i={type:t.type,messageIdentifier:t.messageIdentifier,version:1};if(t.type===r.PUBLISH){t.pubRecReceived&&(i.pubRecReceived=!0),i.payloadMessage={};for(var o="",a=t.payloadMessage.payloadBytes,u=0;u<a.length;u++)a[u]<=15?o=o+"0"+a[u].toString(16):o+=a[u].toString(16);i.payloadMessage.payloadHex=o,i.payloadMessage.qos=t.payloadMessage.qos,i.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(i.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(i.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),i.sequence=t.sequence)}else throw Error(c(s.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,i]));n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(i))},m.prototype.restore=function(e){var t=n.getItem(e),i=JSON.parse(t),o=new p(i.type,i);if(i.type===r.PUBLISH){for(var a=i.payloadMessage.payloadHex,u=new ArrayBuffer(a.length/2),l=new Uint8Array(u),f=0;a.length>=2;){var h=parseInt(a.substring(0,2),16);a=a.substring(2,a.length),l[f++]=h}var d=new E(l);d.qos=i.payloadMessage.qos,d.destinationName=i.payloadMessage.destinationName,i.payloadMessage.duplicate&&(d.duplicate=!0),i.payloadMessage.retained&&(d.retained=!0),o.payloadMessage=d}else throw Error(c(s.INVALID_STORED_DATA,[e,t]));0===e.indexOf("Sent:"+this._localKey)?(o.payloadMessage.duplicate=!0,this._sentMessages[o.messageIdentifier]=o):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[o.messageIdentifier]=o)},m.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},m.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===r.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},m.prototype._on_socket_open=function(){var e=new p(r.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},m.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},m.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var i=new Uint8Array(this.receiveBuffer.length+t.length);i.set(this.receiveBuffer),i.set(t,this.receiveBuffer.length),t=i,delete this.receiveBuffer}try{for(var o=0;o<t.length;){var a=function(e,t){var n,i=t,o=e[t],s=o>>4,a=o&=15;t+=1;var c=0,u=1;do{if(t==e.length)return[null,i];c+=(127&(n=e[t++]))*u,u*=128}while((128&n)!=0);var l=t+c;if(l>e.length)return[null,i];var f=new p(s);switch(s){case r.CONNACK:1&e[t++]&&(f.sessionPresent=!0),f.returnCode=e[t++];break;case r.PUBLISH:var h=a>>1&3,v=d(e,t),y=g(e,t+=2,v);t+=v,h>0&&(f.messageIdentifier=d(e,t),t+=2);var b=new E(e.subarray(t,l));(1&a)==1&&(b.retained=!0),(8&a)==8&&(b.duplicate=!0),b.qos=h,b.destinationName=y,f.payloadMessage=b;break;case r.PUBACK:case r.PUBREC:case r.PUBREL:case r.PUBCOMP:case r.UNSUBACK:f.messageIdentifier=d(e,t);break;case r.SUBACK:f.messageIdentifier=d(e,t),t+=2,f.returnCode=e.subarray(t,l)}return[f,l]}(t,o),u=a[0];if(o=a[1],null!==u)n.push(u);else break}o<t.length&&(this.receiveBuffer=t.subarray(o))}catch(f){var l="undefined"==f.hasOwnProperty("stack")?f.stack.toString():"No Error Stack Available";this._disconnected(s.INTERNAL_ERROR.code,c(s.INTERNAL_ERROR,[f.message,l]));return}return n},m.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case r.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var i=this._sentMessages[t];n.removeItem("Sent:"+this._localKey+i.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var o=this._receivedMessages[t];n.removeItem("Received:"+this._localKey+o.messageIdentifier)}this._receivedMessages={}}if(0===e.returnCode)this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this._disconnected(s.CONNACK_RETURNCODE.code,c(s.CONNACK_RETURNCODE,[e.returnCode,a[e.returnCode]]));break}var u=[];for(var l in this._sentMessages)this._sentMessages.hasOwnProperty(l)&&u.push(this._sentMessages[l]);if(this._buffered_msg_queue.length>0)for(var f=null;f=this._buffered_msg_queue.pop();)u.push(f),this.onMessageDelivered&&(this._notify_msg_sent[f]=this.onMessageDelivered(f.payloadMessage));for(var u=u.sort(function(e,t){return e.sequence-t.sequence}),h=0,d=u.length;h<d;h++){var i=u[h];if(i.type==r.PUBLISH&&i.pubRecReceived){var v=new p(r.PUBREL,{messageIdentifier:i.messageIdentifier});this._schedule_message(v)}else this._schedule_message(i)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var y=!1;this._reconnecting&&(y=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(y,this._wsuri),this._process_queue();break;case r.PUBLISH:this._receivePublish(e);break;case r.PUBACK:var i=this._sentMessages[e.messageIdentifier];i&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(i.payloadMessage));break;case r.PUBREC:var i=this._sentMessages[e.messageIdentifier];if(i){i.pubRecReceived=!0;var v=new p(r.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",i),this._schedule_message(v)}break;case r.PUBREL:var o=this._receivedMessages[e.messageIdentifier];n.removeItem("Received:"+this._localKey+e.messageIdentifier),o&&(this._receiveMessage(o),delete this._receivedMessages[e.messageIdentifier]);var g=new p(r.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(g);break;case r.PUBCOMP:var i=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(i.payloadMessage);break;case r.SUBACK:var i=this._sentMessages[e.messageIdentifier];i&&(i.timeOut&&i.timeOut.cancel(),128===e.returnCode[0]?i.onFailure&&i.onFailure(e.returnCode):i.onSuccess&&i.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case r.UNSUBACK:var i=this._sentMessages[e.messageIdentifier];i&&(i.timeOut&&i.timeOut.cancel(),i.callback&&i.callback(),delete this._sentMessages[e.messageIdentifier]);break;case r.PINGRESP:this.sendPinger.reset();break;case r.DISCONNECT:default:this._disconnected(s.INVALID_MQTT_MESSAGE_TYPE.code,c(s.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(_){var b="undefined"==_.hasOwnProperty("stack")?_.stack.toString():"No Error Stack Available";this._disconnected(s.INTERNAL_ERROR.code,c(s.INTERNAL_ERROR,[_.message,b]));return}},m.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(s.SOCKET_ERROR.code,c(s.SOCKET_ERROR,[e.data]))},m.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(s.SOCKET_CLOSE.code,c(s.SOCKET_CLOSE))},m.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},m.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new p(r.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new p(r.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},m.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},m.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},m.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},m.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting){this._reconnectTimeout=new _(this,this._reconnectInterval,this._reconnect);return}if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=s.OK.code,t=c(s.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==s.OK.code&&this.connectOptions.reconnect){this._reconnectInterval=1,this._reconnect();return}}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},m.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer)for(var t=0,r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t?this._traceBuffer.push(arguments[t]):void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))},m.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==t?n[r]="******":n[r]=e[r]);return n};var E=function(e){if("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView))t=e;else throw c(s.INVALID_ARGUMENT,[e,"newPayload"]);var t,n,r=0,i=!1,o=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:g(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"!=typeof t)return t;var e=new ArrayBuffer(v(t)),n=new Uint8Array(e);return y(t,n,0),n}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"==typeof e)n=e;else throw Error(c(s.INVALID_ARGUMENT,[e,"newDestinationName"]))}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0===e||1===e||2===e)r=e;else throw Error("Invalid argument:"+e)}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"==typeof e)i=e;else throw Error(c(s.INVALID_ARGUMENT,[e,"newRetained"]))}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return o},set:function(e){o=e}}})};return{Client:function(e,t,n,r){if("string"!=typeof e)throw Error(c(s.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){r=t;var o,a=(o=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(a)e=a[4]||a[2],t=parseInt(a[7]),n=a[8];else throw Error(c(s.INVALID_ARGUMENT,[e,"host"]))}else{if(3==arguments.length&&(r=n,n="/mqtt"),"number"!=typeof t||t<0)throw Error(c(s.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw Error(c(s.INVALID_TYPE,[typeof n,"path"]));o="ws://"+(-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1)?"["+e+"]":e)+":"+t+n}for(var u=0,l=0;l<r.length;l++){var p=r.charCodeAt(l);55296<=p&&p<=56319&&l++,u++}if("string"!=typeof r||u>65535)throw Error(c(s.INVALID_ARGUMENT,[r,"clientId"]));var f=new m(o,e,t,n,r);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw Error(c(s.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw Error(c(s.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw Error(c(s.UNSUPPORTED_OPERATION))}},uri:{get:function(){return o},set:function(){throw Error(c(s.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return f.clientId},set:function(){throw Error(c(s.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return f.onConnected},set:function(e){if("function"==typeof e)f.onConnected=e;else throw Error(c(s.INVALID_TYPE,[typeof e,"onConnected"]))}},disconnectedPublishing:{get:function(){return f.disconnectedPublishing},set:function(e){f.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return f.disconnectedBufferSize},set:function(e){f.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return f.onConnectionLost},set:function(e){if("function"==typeof e)f.onConnectionLost=e;else throw Error(c(s.INVALID_TYPE,[typeof e,"onConnectionLost"]))}},onMessageDelivered:{get:function(){return f.onMessageDelivered},set:function(e){if("function"==typeof e)f.onMessageDelivered=e;else throw Error(c(s.INVALID_TYPE,[typeof e,"onMessageDelivered"]))}},onMessageArrived:{get:function(){return f.onMessageArrived},set:function(e){if("function"==typeof e)f.onMessageArrived=e;else throw Error(c(s.INVALID_TYPE,[typeof e,"onMessageArrived"]))}},trace:{get:function(){return f.traceFunction},set:function(e){if("function"==typeof e)f.traceFunction=e;else throw Error(c(s.INVALID_TYPE,[typeof e,"onTrace"]))}}}),this.connect=function(e){if(i(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw Error(c(s.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw Error(c(s.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof E))throw Error(c(s.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw Error(c(s.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array)||e.hosts.length<1)throw Error(c(s.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,r=0;r<e.hosts.length;r++){if("string"!=typeof e.hosts[r])throw Error(c(s.INVALID_TYPE,[typeof e.hosts[r],"connectOptions.hosts["+r+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[r])){if(0===r)t=!0;else if(!t)throw Error(c(s.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}else if(t)throw Error(c(s.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports||!(e.ports instanceof Array)||e.hosts.length!==e.ports.length)throw Error(c(s.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(var r=0;r<e.hosts.length;r++){if("number"!=typeof e.ports[r]||e.ports[r]<0)throw Error(c(s.INVALID_TYPE,[typeof e.ports[r],"connectOptions.ports["+r+"]"]));var a=e.hosts[r],u=e.ports[r];o="ws://"+(-1!==a.indexOf(":")?"["+a+"]":a)+":"+u+n,e.uris.push(o)}}}f.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw Error("Invalid argument:"+e);if(i(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&!(0===t.qos||1===t.qos||2===t.qos))throw Error(c(s.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));f.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw Error("Invalid argument:"+e);if(i(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw Error("unsubscribeOptions.timeout specified with no onFailure callback.");f.unsubscribe(e,t)},this.send=function(e,t,n,r){var i;if(0==arguments.length)throw Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof E)&&"string"!=typeof e)throw Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw Error(c(s.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));f.send(i)}else(i=new E(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),f.send(i)},this.publish=function(e,t,n,r){var i;if(0==arguments.length)throw Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof E)&&"string"!=typeof e)throw Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw Error(c(s.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));f.send(i)}else(i=new E(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),f.send(i)},this.disconnect=function(){f.disconnect()},this.getTraceLog=function(){return f.getTraceLog()},this.startTrace=function(){f.startTrace()},this.stopTrace=function(){f.stopTrace()},this.isConnected=function(){return f.connected}},Message:E}}(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},9329:function(e,t,n){e.exports=n(516).Observable},516:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}t.Observable=void 0;var o=function(){return"function"==typeof Symbol},s=function(e){return o()&&Boolean(Symbol[e])},a=function(e){return s(e)?Symbol[e]:"@@"+e};o()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var c=a("iterator"),u=a("observable"),l=a("species");function p(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw TypeError(n+" is not a function");return n}}function f(e){var t=e.constructor;return void 0!==t&&null===(t=t[l])&&(t=void 0),void 0!==t?t:E}function h(e){h.log?h.log(e):setTimeout(function(){throw e})}function d(e){Promise.resolve().then(function(){try{e()}catch(t){h(t)}})}function v(e){var t=e._cleanup;if(void 0!==t){if(e._cleanup=void 0,!t)return;try{if("function"==typeof t)t();else{var n=p(t,"unsubscribe");n&&n.call(t)}}catch(r){h(r)}}}function y(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function g(e,t,n){e._state="running";var r=e._observer;try{var i=p(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(y(e),i)i.call(r,n);else throw n;break;case"complete":y(e),i&&i.call(r)}}catch(o){h(o)}"closed"===e._state?v(e):"running"===e._state&&(e._state="ready")}function b(e,t,n){if("closed"!==e._state){if("buffering"===e._state){e._queue.push({type:t,value:n});return}if("ready"!==e._state){e._state="buffering",e._queue=[{type:t,value:n}],d(function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(g(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)});return}g(e,t,n)}}var _=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new m(this);try{this._cleanup=r.call(void 0,i)}catch(o){i.error(o)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(y(this),v(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),m=function(){function e(t){n(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){b(this._subscription,"next",e)}},{key:"error",value:function(e){b(this._subscription,"error",e)}},{key:"complete",value:function(){b(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),E=function(){function e(t){if(n(this,e),!(this instanceof e))throw TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return("object"!=typeof e||null===e)&&(e={next:e,error:arguments[1],complete:arguments[2]}),new _(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise(function(n,r){if("function"!=typeof e){r(TypeError(e+" is not a function"));return}function i(){o.unsubscribe(),n()}var o=t.subscribe({next:function(t){try{e(t,i)}catch(n){r(n),o.unsubscribe()}},error:r,complete:n})})}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw TypeError(e+" is not a function");return new(f(this))(function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})})}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw TypeError(e+" is not a function");return new(f(this))(function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})})}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw TypeError(e+" is not a function");var n=f(this),r=arguments.length>1,i=!1,o=arguments[1],s=o;return new n(function(n){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||r)try{s=e(s,t)}catch(a){return n.error(a)}else s=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})})}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=f(this);return new i(function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}})}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw TypeError(e+" is not a function");var n=f(this);return new n(function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(o){return r.error(o)}var a=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(a);e>=0&&i.splice(e,1),s()}});i.push(a)},error:function(e){r.error(e)},complete:function(){s()}});function s(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach(function(e){return e.unsubscribe()}),o.unsubscribe()}})}},{key:u,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw TypeError(t+" is not an object");var r=p(t,u);if(r){var i=r.call(t);if(Object(i)!==i)throw TypeError(i+" is not an object");return i instanceof E&&i.constructor===n?i:new n(function(e){return i.subscribe(e)})}if(s("iterator")&&(r=p(t,c)))return new n(function(e){d(function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var c=s.value;if(e.next(c),e.closed)return}}catch(u){i=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}})});if(Array.isArray(t))return new n(function(e){d(function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}})});throw TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"==typeof this?this:e)(function(e){d(function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}})})}},{key:l,get:function(){return this}}]),e}();t.Observable=E,o()&&Object.defineProperty(E,Symbol("extensions"),{value:{symbol:u,hostReportError:h},configurable:!0})}}]);